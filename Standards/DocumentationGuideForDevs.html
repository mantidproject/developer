<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Documentation Guide for Devs</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Algorithm Documentation" href="AlgorithmDocumentation.html" />
    <link rel="prev" title="Unit Test Coding Standards" href="UnitTestStandards.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>master</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="../index.html">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org">Wiki</a></li>
                <li><a href="http://docs.mantidproject.org">User Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <section id="documentation-guide-for-devs">
<span id="documentationguidefordevs"></span><h1>Documentation Guide for Devs<a class="headerlink" href="#documentation-guide-for-devs" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#configuration" id="id1">Configuration</a></p></li>
<li><p><a class="reference internal" href="#rest-editors-ide-plugins" id="id2">reST editors/IDE plugins</a></p></li>
<li><p><a class="reference internal" href="#the-restructuredtext-file" id="id3">The reStructuredText File</a></p>
<ul>
<li><p><a class="reference internal" href="#directives" id="id4">Directives</a></p></li>
<li><p><a class="reference internal" href="#comments" id="id5">Comments</a></p></li>
<li><p><a class="reference internal" href="#algorithms" id="id6">Algorithms</a></p></li>
<li><p><a class="reference internal" href="#interfaces" id="id7">Interfaces</a></p></li>
<li><p><a class="reference internal" href="#how-to-define-titles-sections-etc" id="id8">How to define titles, sections etc.</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#common-warnings-and-fixes" id="id9">Common Warnings and Fixes</a></p>
<ul>
<li><p><a class="reference internal" href="#explicit-markup-ends-without-a-blank-line-unexpected-unindent" id="id10">Explicit markup ends without a blank line; unexpected unindent.</a></p></li>
<li><p><a class="reference internal" href="#inline-interpreted-text-or-phrase-reference-start-string-without-end-string" id="id11">Inline interpreted text or phrase reference start-string without end-string</a></p></li>
<li><p><a class="reference internal" href="#image-file-not-readable" id="id12">image file not readable</a></p></li>
<li><p><a class="reference internal" href="#unknown-directive-type-foo" id="id13">Unknown directive type “foo”</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#building-the-html-development-documentation" id="id14">Building the HTML Development Documentation</a></p></li>
</ul>
</div>
<p>This page gives an overview of the documentation process for mantid.</p>
<p>The documentation is written in <a class="reference external" href="https://docutils.sourceforge.io/rst.html">reStructuredText</a>
and processed using <a class="reference external" href="http://www.sphinx-doc.org/en/master/">Sphinx</a> along with
<a class="reference external" href="https://pypi.python.org/pypi/sphinx-bootstrap-theme/">Sphinx bootstrap theme</a> and custom css.</p>
<section id="configuration">
<h2><a class="toc-backref" href="#id1">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>The documentation is configured using CMake and assumes the the instructions in the
<a class="reference internal" href="../GettingStarted/GettingStarted.html#gettingstarted"><span class="std std-ref">Getting Started</span></a> section have been followed.</p>
<p>The following settings, relating to the documentation, are available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DOCS_DOTDIAGRAMS</span></code>: If enabled then the workflow diagrams are generated and included
otherwise a placeholder image is included with a caption indicating the processing is disabled. Default=OFF.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DOCS_SCREENSHOTS</span></code>: If enabled then the automatic screenshots of algorithm dialogs and interfaces are included
otherwise a placeholder image is included with a caption indicating the processing is disabled. Default=OFF.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DOCS_MATH_EXT</span></code>: Extension used to provide the <code class="docutils literal notranslate"><span class="pre">:math:</span></code> processing ability.
Default=``sphinx.ext.mathjax`` in CMake but this is set to <code class="docutils literal notranslate"><span class="pre">sphinx.ext.imgmath</span></code>
for clean package builds to remove the javascript dependency.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DOCS_PLOTDIRECTIVE</span></code>: If enabled then the <code class="docutils literal notranslate"><span class="pre">:plot:</span></code> directive is processed and
the code/plots are included. WARNING: This can add ~15mins to the build time. Default=OFF.</p></li>
</ul>
<p>The defaults are set to produce a reasonable build time for developers but set to build everything on clean package builds.</p>
</section>
<section id="rest-editors-ide-plugins">
<h2><a class="toc-backref" href="#id2">reST editors/IDE plugins</a><a class="headerlink" href="#rest-editors-ide-plugins" title="Permalink to this headline">¶</a></h2>
<p>Several free &amp; proprietary editors support syntax-highlighting reST.
A list of the most notable ones can be found <a class="reference external" href="https://stackoverflow.com/questions/2746692/restructuredtext-tool-support">here</a>.</p>
<p>Other tools:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://pypi.python.org/pypi/restview">restview</a>: which can be easily installed using <code class="docutils literal notranslate"><span class="pre">pip</span></code>.
It opens a webpage with the rst file processed and refreshes the page automatically whenever the .rst file is saved.
This can help you quickly track down that unexpected space or missing newline without having to rebuild the documentation each time.
It does not support sphinx directives so links will produce errors on the page which need to be checked by building the documentation using Mantid.
The syntax to use it is: <code class="docutils literal notranslate"><span class="pre">restview</span> <span class="pre">path/to/file.rst</span></code></p></li>
<li><p>VSCode with <a class="reference external" href="https://marketplace.visualstudio.com/items?itemName=lextudio.restructuredtext">reStructuredText</a> enables previews of
documents inside VSCode. The preview does not support the mantid directives but is useful for a general idea of structure.</p></li>
</ul>
</section>
<section id="the-restructuredtext-file">
<h2><a class="toc-backref" href="#id3">The reStructuredText File</a><a class="headerlink" href="#the-restructuredtext-file" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> is a markup format and is converted into themed html pages using Sphinx.
A primer on reStructuredText can be found here along with a single-page cheat sheet.</p>
<p>The source files are .rst files which are located in the <code class="docutils literal notranslate"><span class="pre">docs/source</span></code> directory in the repository.
There are various subdirectories based on the type of object being documented, i.e. <code class="docutils literal notranslate"><span class="pre">docs/source/algorithms</span></code>, <code class="docutils literal notranslate"><span class="pre">docs/source/functions</span></code>.</p>
<p>The documentation pages is aimed at <em>users</em>, not developers, and all information should be targeted for the users.
Information for developers should go into doxygen/code-comments in the code or into <code class="docutils literal notranslate"><span class="pre">dev-docs</span></code>.</p>
<section id="directives">
<h3><a class="toc-backref" href="#id4">Directives</a><a class="headerlink" href="#directives" title="Permalink to this headline">¶</a></h3>
<p>Sphinx is built on the <code class="docutils literal notranslate"><span class="pre">docutils</span></code> package that allows for directives to be inserted in to reST comments. For example:</p>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">warning</span><span class="p">::</span>
   This text will show up surrounded by a coloured box.
</pre></div>
</div>
<p>tells sphinx to treat the the given text differently and flag it so that a user will see it as a warning. The name of the directive is <code class="docutils literal notranslate"><span class="pre">warning</span></code> and the <code class="docutils literal notranslate"><span class="pre">..</span></code> is a reST comment syntax. The directive name must be followed by <code class="docutils literal notranslate"><span class="pre">::</span></code> so that Sphinx process knows it has a directive command and not just plain text. For a list of directives known to Sphinx, see <a class="reference external" href="http://www.sphinx-doc.org/en/master/rest.html#directives">here</a>.</p>
</section>
<section id="comments">
<h3><a class="toc-backref" href="#id5">Comments</a><a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h3>
<p>If you wish to place comments in the reST file that will not be rendered anywhere then start the line/block with <code class="docutils literal notranslate"><span class="pre">..</span></code>. See <a class="reference external" href="http://sphinx-doc.org/rest.html#comments">here</a> for more details.</p>
</section>
<section id="algorithms">
<h3><a class="toc-backref" href="#id6">Algorithms</a><a class="headerlink" href="#algorithms" title="Permalink to this headline">¶</a></h3>
<p>The algorithm documentation has a slightly more rigid structure and is described in more detail <a class="reference internal" href="AlgorithmDocumentation.html#algorithmdocumentation"><span class="std std-ref">here</span></a> and <a class="reference internal" href="AlgorithmUsageExamples.html#algorithmusageexamples"><span class="std std-ref">here</span></a>.</p>
</section>
<section id="interfaces">
<h3><a class="toc-backref" href="#id7">Interfaces</a><a class="headerlink" href="#interfaces" title="Permalink to this headline">¶</a></h3>
<p>For documenting custom interfaces, it is recommended that you consult <a class="reference internal" href="InterfaceDocumentation.html#interfacedocumentation"><span class="std std-ref">this</span></a>  page,
which explains how to document them, and which directives may be used in more detail.</p>
</section>
<section id="how-to-define-titles-sections-etc">
<h3><a class="toc-backref" href="#id8">How to define titles, sections etc.</a><a class="headerlink" href="#how-to-define-titles-sections-etc" title="Permalink to this headline">¶</a></h3>
<p>The syntax for headers in restructuredText is the header followed by a line containing symbols such as hyphens. It is possible to use different punctuation to create headers but within the Mantid .rst files we standardize on the characters used as follows:</p>
<dl class="simple">
<dt>The title of the page</dt><dd><p>Should be the first header of your .rst file, and generally only occur once. (This is done for you in an algorithm with the <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">algorithm::</span></code> directive)</p>
</dd>
</dl>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span><span class="gh">=============================================</span>
<span class="gh">Page title (e.g. Workspace) - This outputs H1</span>
<span class="gh">=============================================</span>
</pre></div>
</div>
<dl class="simple">
<dt>Section headings</dt><dd><p>Sections, such as the description of an algorithm, can be created with the following syntax</p>
</dd>
</dl>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span><span class="gh"># Description - This outputs H2</span>
<span class="gh">-------------------------------</span>
</pre></div>
</div>
<dl class="simple">
<dt>Sub-sections</dt><dd><p>The following is used to create a sub-section of the above section. This must follow after the above to be parsed correctly.</p>
</dd>
</dl>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span><span class="gh">Sub-heading - This outputs h3</span>
<span class="gh">#############################</span>
</pre></div>
</div>
<dl class="simple">
<dt>Sub-sub-sections</dt><dd><p>The following is used to create a sub-header for the sub-heading above. This must also follow after the above header to be parsed correctly.</p>
</dd>
</dl>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span><span class="gh">Sub-sub-heading - Outputs h4</span>
<span class="gh">^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
</pre></div>
</div>
</section>
</section>
<section id="common-warnings-and-fixes">
<h2><a class="toc-backref" href="#id9">Common Warnings and Fixes</a><a class="headerlink" href="#common-warnings-and-fixes" title="Permalink to this headline">¶</a></h2>
<p>If you have weird messages about sphinx warnings that happen on “Console output”,
those are coming either from summary functions in algorithms or from parameter descriptions.
In these</p>
<ul class="simple">
<li><p><em>Do not</em> use <code class="docutils literal notranslate"><span class="pre">*</span></code> in parameter names or summary. This yields “Inline emphasis start-string without end-string” warnings.</p></li>
<li><p><em>Do not</em> use things like <code class="docutils literal notranslate"><span class="pre">|Q|</span></code>. This yields sphinx error “Undefined substitution referenced”.</p></li>
<li><dl class="simple">
<dt>When using hyperlinks with a label, try to use anonymous hyperlinks (two underscores instead of one) to avoid name clashes.</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">`MD</span> <span class="pre">&lt;http://mysite.com/MD1.html&gt;`__</span></code> and <code class="docutils literal notranslate"><span class="pre">`MD</span> <span class="pre">&lt;http://mysite.com/MD2.html&gt;`__</span></code> instead of <code class="docutils literal notranslate"><span class="pre">`MD</span> <span class="pre">&lt;http://mysite.com/MD1.html&gt;`_</span></code> and <code class="docutils literal notranslate"><span class="pre">`MD</span> <span class="pre">&lt;http://mysite.com/MD2.html&gt;`_</span></code>. The second on will result in a warning.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>While building the final output, Sphinx will emit warning messages if it things the input restructured text is malformed.
This section lists some more common warnings along with suggestions for fixes.</p>
<section id="explicit-markup-ends-without-a-blank-line-unexpected-unindent">
<h3><a class="toc-backref" href="#id10">Explicit markup ends without a blank line; unexpected unindent.</a><a class="headerlink" href="#explicit-markup-ends-without-a-blank-line-unexpected-unindent" title="Permalink to this headline">¶</a></h3>
<p>This is caused by the lack of a blank line between an indented explicit markup block and more unindented text, e.g.</p>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">testcode</span><span class="p">::</span> ExHist

   print &quot;This is a test&quot;
 Output:                         &lt;------------- There should be a blank line above this

<span class="p"> ..</span> <span class="ow">testoutput</span><span class="p">::</span> ExHist
</pre></div>
</div>
<p>It can be fixed by having a blank line between the indented block and the unindented text.</p>
</section>
<section id="inline-interpreted-text-or-phrase-reference-start-string-without-end-string">
<h3><a class="toc-backref" href="#id11">Inline interpreted text or phrase reference start-string without end-string</a><a class="headerlink" href="#inline-interpreted-text-or-phrase-reference-start-string-without-end-string" title="Permalink to this headline">¶</a></h3>
<p>This is caused by using one of the <a class="reference external" href="http://www.sphinx-doc.org/en/master/rest.html#inline-markup">inline markup tags</a>, where the text being wrapped splits over multiple lines. In these cases the directive variant of the inline markup should be used. One example is the <code class="docutils literal notranslate"><span class="pre">:math:</span></code> tag being spread over multiple lines. The tag <code class="docutils literal notranslate"><span class="pre">:math:</span></code> must only be used for inline markup, i.e. when there is no newline in the math string. For multi-line maths markup you must use the <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">math::</span></code> directive instead.</p>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span>:math:`\rm U \rm B \left(
                             \begin{array}{c}
                               h_i \\
                               k_i \\
                               l_i \\
                             \end{array}
                            \right) = \rm Q_{gon,i}` (1)
</pre></div>
</div>
<p>should be written</p>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">math</span><span class="p">::</span>
                                                                &lt;------------------ intentional blank line
            \rm U \rm B \left(
                                \begin{array}{c}
                                  h_i \\
                                  k_i \\
                                  l_i \\
                                \end{array}
                               \right) = \rm Q_{gon,i} (1)
                                                                &lt;------------------ intentional blank line
</pre></div>
</div>
<p>where there is an explicit blank line after the final line of latex. See <a class="reference external" href="http://sphinx-doc.org/ext/math.html">here</a> for more information.</p>
</section>
<section id="image-file-not-readable">
<h3><a class="toc-backref" href="#id12">image file not readable</a><a class="headerlink" href="#image-file-not-readable" title="Permalink to this headline">¶</a></h3>
<p>This indicates the that image referenced by <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">image::</span></code> or <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">figure::</span></code> cannot be accessed.
Either the image is not there or the reference is incorrect.</p>
<p>Image links in Sphinx are either relative,
in which case it is relative to the current document or
absolute in which case the path is assumed relative to the root of the source tree (the directory containing the conf.py)</p>
</section>
<section id="unknown-directive-type-foo">
<h3><a class="toc-backref" href="#id13">Unknown directive type “foo”</a><a class="headerlink" href="#unknown-directive-type-foo" title="Permalink to this headline">¶</a></h3>
<p>Sphinx has encountered a line starting with <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">foo::</span></code>, where <code class="docutils literal notranslate"><span class="pre">foo</span></code> is expected to be a known directive.</p>
<p>The fix is to correct the name of the directive.</p>
</section>
</section>
<section id="building-the-html-development-documentation">
<h2><a class="toc-backref" href="#id14">Building the HTML Development Documentation</a><a class="headerlink" href="#building-the-html-development-documentation" title="Permalink to this headline">¶</a></h2>
<p>The developer documentation is written as <code class="docutils literal notranslate"><span class="pre">.rst</span></code> files in the mantid source folder under <code class="docutils literal notranslate"><span class="pre">dev-docs/</span></code>,
the html files can be built using the <cite>dev-docs-html</cite> target.
This will build all the development documentation into the mantid build folder under <code class="docutils literal notranslate"><span class="pre">dev-docs/html/</span></code>.</p>
<p>In Visual Studio, this can be found in the “Documentation” folder in the solution explorer for the Mantid solution. Simply right click <cite>dev-docs-html</cite> and select build.</p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="UnitTestStandards.html" title="Previous Chapter: Unit Test Coding Standards"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Unit Test Cod...</span>
    </a>
  </li>
  <li>
    <a href="AlgorithmDocumentation.html" title="Next Chapter: Algorithm Documentation"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Algorithm Doc... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>