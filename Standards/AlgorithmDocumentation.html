<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Algorithm Documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Algorithm Usage Examples" href="AlgorithmUsageExamples.html" />
    <link rel="prev" title="Documentation Guide for Devs" href="DocumentationGuideForDevs.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>master</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="../index.html">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org">Wiki</a></li>
                <li><a href="http://docs.mantidproject.org">User Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
<div class="related" role="navigation" aria-label="related navigation">
  <h3>Navigation</h3>
  <ul>
    <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
    
    <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Standards</a> &#187;</li>
    
    
    
    
    <li class="nav-item nav-item-this"><a href="">Algorithm Documentation</a></li>
    
    
  </ul>
</div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <section id="algorithm-documentation">
<span id="algorithmdocumentation"></span><h1>Algorithm Documentation<a class="headerlink" href="#algorithm-documentation" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id1">Summary</a></p></li>
<li><p><a class="reference internal" href="#how-to-document-an-algorithm" id="id2">How to Document an Algorithm</a></p>
<ul>
<li><p><a class="reference internal" href="#the-code-files" id="id3">The Code Files</a></p></li>
<li><p><a class="reference internal" href="#property-descriptions" id="id4">Property Descriptions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#workflow-algorithms" id="id5">Workflow algorithms</a></p></li>
<li><p><a class="reference internal" href="#algorithm-directives" id="id6">Algorithm Directives</a></p></li>
<li><p><a class="reference internal" href="#description" id="id7">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#referencing-other-algorithms" id="id8">Referencing Other Algorithms</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id9">Usage</a></p></li>
<li><p><a class="reference internal" href="#building-the-documentation" id="id10">Building the Documentation</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>This page deals with the specifics of how to document an algorithm. For a more general guide to the Mantid documentation system see <a class="reference internal" href="DocumentationGuideForDevs.html#documentationguidefordevs"><span class="std std-ref">Documentation Guide For Devs</span></a>.</p>
</section>
<section id="how-to-document-an-algorithm">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">How to Document an Algorithm</a><a class="headerlink" href="#how-to-document-an-algorithm" title="Permalink to this heading">¶</a></h2>
<p>Algorithm documentation is stored in two places.</p>
<ul class="simple">
<li><p>The code (.cpp / .h / .py) files: For strings that are needed in the GUI for tooltips etc.</p></li>
<li><p>The .rst file: For all other documentation, including the algorithm description and <a class="reference internal" href="AlgorithmUsageExamples.html#algorithmusageexamples"><span class="std std-ref">usage examples</span></a>.</p></li>
</ul>
<section id="the-code-files">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">The Code Files</a><a class="headerlink" href="#the-code-files" title="Permalink to this heading">¶</a></h3>
<p>The code files hold documentation in two important areas.</p>
<dl class="simple">
<dt>The <code class="docutils literal notranslate"><span class="pre">summary</span></code> method</dt><dd><p>The summary method should return a string (in plain text) that describes in a short sentence the purpose of the algorithm. This is used to provide a summary in the algorithm dialog box and in the algorithm documentation web page.</p>
</dd>
</dl>
<p>In C++: (This example uses the .h file, you could of course implement it in the .cpp file)</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">/// Algorithm&#39;s name for identification overriding a virtual method</span>
<span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="nf">name</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Rebin&quot;</span><span class="p">;}</span>

<span class="c1">///Summary of algorithms purpose</span>
<span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="nf">summary</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Rebins data with new X bin boundaries.&quot;</span><span class="p">;}</span>
</pre></div>
</div>
</section>
<section id="property-descriptions">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Property Descriptions</a><a class="headerlink" href="#property-descriptions" title="Permalink to this heading">¶</a></h3>
<p>Each property declaration in the init method of the .cpp file should include a description. This is used as a tooltip, and in the ‘properties’ table on the algorithm’s documentation web page.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The tooltip may only show the description up to the first dot. Be sure that the first sentence in the description gives enough information to understand the purpose of the property.</p>
</div>
<p>For example:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">declareProperty</span><span class="p">(</span>
<span class="k">new</span><span class="w"> </span><span class="n">WorkspaceProperty</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="s">&quot;InputWorkspace&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Direction</span><span class="o">::</span><span class="n">Input</span><span class="p">),</span>
<span class="w">  </span><span class="s">&quot;Workspace containing the input data&quot;</span><span class="p">);</span>
<span class="n">declareProperty</span><span class="p">(</span>
<span class="k">new</span><span class="w"> </span><span class="n">WorkspaceProperty</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="s">&quot;OutputWorkspace&quot;</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="n">Direction</span><span class="o">::</span><span class="n">Output</span><span class="p">),</span>
<span class="w">  </span><span class="s">&quot;The name to give the output workspace&quot;</span><span class="p">);</span>
<span class="n">declareProperty</span><span class="p">(</span>
<span class="k">new</span><span class="w"> </span><span class="n">ArrayProperty</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;Params&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">RebinParamsValidator</span><span class="o">&gt;</span><span class="p">()),</span>
<span class="w">  </span><span class="s">&quot;A comma separated list of first bin boundary, width, last bin boundary. Optionally &quot;</span>
<span class="w">  </span><span class="s">&quot;this can be followed by a comma and more widths and last boundary pairs. &quot;</span>
<span class="w">  </span><span class="s">&quot;Optionally this can also be a single number, which is the bin width. &quot;</span>
<span class="w">  </span><span class="s">&quot;In this case, the boundary of binning will be determined by minimum and maximum TOF &quot;</span>
<span class="w">  </span><span class="s">&quot;values among all events, or previous binning boundary, in case of event Workspace, or &quot;</span>
<span class="w">  </span><span class="s">&quot;non-event Workspace, respectively. Negative width values indicate logarithmic binning. &quot;</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="workflow-algorithms">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Workflow algorithms</a><a class="headerlink" href="#workflow-algorithms" title="Permalink to this heading">¶</a></h2>
<p>There should be a flow chart for workflow algorithms. See <a class="reference internal" href="../FlowchartCreation.html#flowchartcreation"><span class="std std-ref">here</span></a> on how to make one.</p>
</section>
<section id="algorithm-directives">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Algorithm Directives</a><a class="headerlink" href="#algorithm-directives" title="Permalink to this heading">¶</a></h2>
<p>We have defined several custom directives using the Sphinx extension framework. These are defined to generate the information from an algorithm that is not required to be hand written, i.e the properties table. Each .rst file that is documenting an algorithm should use these directives.</p>
<p>As the <strong>Description</strong> and <strong>Usage</strong> of an algorithm <em>cannot</em> be obtained automatically, it must be manually entered. The structure of an algorithm’s .rst is:</p>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">algorithm</span><span class="p">::</span>

<span class="p">..</span> <span class="ow">summary</span><span class="p">::</span>

<span class="p">..</span> <span class="ow">relatedalgorithms</span><span class="p">::</span>

<span class="p">..</span> <span class="ow">properties</span><span class="p">::</span>

<span class="gh">Description</span>
<span class="gh">-----------</span>

The description of your algorithm here.

<span class="gh">Usage</span>
<span class="gh">-----</span>

A custom usage example.

<span class="p">..</span> <span class="ow">categories</span><span class="p">::</span>

<span class="p">..</span> <span class="ow">sourcelink</span><span class="p">::</span>
</pre></div>
</div>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">algorithm</span> <span class="pre">::</span></code></dt><dd><p>This directive has several pieces of functionality, which includes:</p>
</dd>
</dl>
<ul class="simple">
<li><p>A referable link is created for the algorithm. This allows other documentation pages create references to it (e.g. create links to it).</p></li>
<li><p>Insertion of the page title (which is the name of the algorithm, including the version).</p></li>
<li><p>Insertion of a screenshot of the algorithm’s dialog.</p></li>
<li><p>Insertion of the Table Of Contents.</p></li>
</ul>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">summary::</span></code></dt><dd><p>The content of the summary method declared in your algorithm is output as HTML, for example, the following method is used in Rebin:</p>
</dd>
</dl>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">/// Summary of algorithms purpose</span>
<span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="nf">summary</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Rebins data with new X bin boundaries. For EventWorkspaces, you can very quickly rebin in-place by keeping the same output name and PreserveEvents=true.&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">relatedalgorithms::</span></code></dt><dd><p>This directive obtains a list of related algorithms from the <code class="docutils literal notranslate"><span class="pre">seeAlso</span></code> and <code class="docutils literal notranslate"><span class="pre">alias</span></code> methods in the algorithm, for example, the following <code class="docutils literal notranslate"><span class="pre">seeAlso</span></code> is used in Rebin:</p>
</dd>
</dl>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">/// Algorithm&#39;s seeAlso</span>
<span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">seeAlso</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;RebinToWorkspace&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Rebin2D&quot;</span><span class="p">,</span><span class="w">           </span><span class="s">&quot;Rebunch&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="s">&quot;Regroup&quot;</span><span class="p">,</span><span class="w">          </span><span class="s">&quot;RebinByPulseTimes&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;RebinByTimeAtSample&quot;</span><span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">properties::</span></code></dt><dd><p>As mentioned above, it is <em>critical</em> that you include a description for the properties of your algorithm. This directive obtains all of the algorithm’s properties (set inside the algorithm’s <code class="docutils literal notranslate"><span class="pre">init</span></code> method) and outputs in a table format.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">categories::</span></code></dt><dd><p>By default, this directive obtains the categories that were set in the <code class="docutils literal notranslate"><span class="pre">categories</span></code> method the algorithm. For example, in Rebin the category method is in the header and contains:</p>
</dd>
</dl>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">/// Algorithm&#39;s category for identification</span>
<span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="nf">category</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Transforms</span><span class="se">\\</span><span class="s">Rebin&quot;</span><span class="p">;}</span>
</pre></div>
</div>
<p>When the HTML is generate a categories list is built that contains: Algorithms, Transforms and Rebin.</p>
<p>It is possible to add additional categories by passing the directive arguments, for example, the following would output the above categories, and also <cite>Example</cite>:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">sourcelink::</span></code></dt><dd><p>This directive adds links to the algorithms source code.</p>
</dd>
</dl>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>This section must be manually entered. The description is an extension of the summary, and must contain a detailed overview of the algorithm’s functionality.</p>
<section id="referencing-other-algorithms">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Referencing Other Algorithms</a><a class="headerlink" href="#referencing-other-algorithms" title="Permalink to this heading">¶</a></h3>
<p>Every algorithm and version has been marked with a tag that can be used to reference it from other documents. If you need to reference the latest version of an algorithm, e.g. DiffractionFocussing, then in Sphinx you type would type</p>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span><span class="na">:ref:</span><span class="nv">`DiffractionFocussing &lt;algm-DiffractionFocussing&gt;`</span>
</pre></div>
</div>
<p>If you need to reference a particular version then you would type</p>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span><span class="na">:ref:</span><span class="nv">`DiffractionFocussing version 2 &lt;algm-DiffractionFocussing-v2&gt;`</span>
</pre></div>
</div>
<p>where the first part outside the angle brackets defines the link text and the part inside the angle brackets references the tag name.</p>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p>This section <em>must</em> be manually entered. The usage is a ‘code’ example of the algorithm in use. The <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">testcode::</span></code> directive must be used to verify the usage code you entered works correctly. See <a class="reference internal" href="AlgorithmUsageExamples.html#algorithmusageexamples"><span class="std std-ref">here</span></a> for more information on how to write usage examples.</p>
</section>
<section id="building-the-documentation">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Building the Documentation</a><a class="headerlink" href="#building-the-documentation" title="Permalink to this heading">¶</a></h2>
<p>One can update the documentation for a particular algorithm after changes have been introduced into the corresponding documentation file.
Assuming you are in the build directory and want to update the documentation for Rebin:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PYTHONPATH</span><span class="o">=/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="nb">bin</span> <span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">sphinx</span> <span class="o">&lt;</span><span class="n">sourcedir</span><span class="o">&gt;/</span><span class="n">docs</span><span class="o">/</span><span class="n">source</span> <span class="n">docs</span> <span class="o">&lt;</span><span class="n">sourcedir</span><span class="o">&gt;/</span><span class="n">docs</span><span class="o">/</span><span class="n">source</span><span class="o">/</span><span class="n">algorithms</span><span class="o">/</span><span class="n">Rebin</span><span class="o">-</span><span class="n">v1</span><span class="o">.</span><span class="n">rst</span>
</pre></div>
</div>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="DocumentationGuideForDevs.html" title="Previous Chapter: Documentation Guide for Devs"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Documentation...</span>
    </a>
  </li>
  <li>
    <a href="AlgorithmUsageExamples.html" title="Next Chapter: Algorithm Usage Examples"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Algorithm Usa... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>