<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>C++ Coding Standards</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=fadd4351" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=77160d70" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=48f0e2ba"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="GUI Standards" href="GUIStandards.html" />
    <link rel="prev" title="C++ Code Modernization Guidelines" href="CPPModernization.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>master</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="../index.html">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">User Documentation</a></li>
                <li><a href="http://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
<div class="related" role="navigation" aria-label="related navigation">
  <h3>Navigation</h3>
  <ul>
    <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
    
    <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Standards</a> &#187;</li>
    
    
    
    
    <li class="nav-item nav-item-this"><a href="">C++ Coding Standards</a></li>
    
    
  </ul>
</div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <section id="c-coding-standards">
<span id="cppcodingstandards"></span><h1>C++ Coding Standards<a class="headerlink" href="#c-coding-standards" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#references" id="id1">References</a></p></li>
<li><p><a class="reference internal" href="#overview" id="id2">Overview</a></p></li>
<li><p><a class="reference internal" href="#files" id="id3">Files</a></p></li>
<li><p><a class="reference internal" href="#headers" id="id4">Headers</a></p>
<ul>
<li><p><a class="reference internal" href="#header-files" id="id5">Header Files</a></p></li>
<li><p><a class="reference internal" href="#layout-of-header-file" id="id6">Layout of Header File</a></p></li>
<li><p><a class="reference internal" href="#cpp-file-headers" id="id7">CPP file Headers</a></p></li>
<li><p><a class="reference internal" href="#function-headers" id="id8">Function headers</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#naming-conventions" id="id9">Naming Conventions</a></p></li>
<li><p><a class="reference internal" href="#preprocessor" id="id10">Preprocessor</a></p></li>
<li><p><a class="reference internal" href="#classes-and-namespaces" id="id11">Classes and Namespaces</a></p>
<ul>
<li><p><a class="reference internal" href="#mantid-namespaces" id="id12">Mantid Namespaces</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#functions-and-variables" id="id13">Functions and Variables</a></p></li>
<li><p><a class="reference internal" href="#expressions-and-statements" id="id14">Expressions and Statements</a></p></li>
<li><p><a class="reference internal" href="#comments" id="id15">Comments</a></p></li>
<li><p><a class="reference internal" href="#error-handling" id="id16">Error Handling</a></p></li>
</ul>
</nav>
<section id="references">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">References</a><a class="headerlink" href="#references" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="http://llvm.org/docs/CodingStandards.html">LLVM Coding standard</a></p></li>
<li><p><em>The C++ Programming Language</em> (third edition), Bjarne Stroustrup</p></li>
<li><p><a class="reference external" href="http://www.open-std.org/jtc1/sc22/wg21/">C++ ANSI Standards</a></p></li>
</ul>
</section>
<section id="overview">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>Mantid follow the LLVM C++ coding standards and standards on this
page. Where these standards overlap the standards on this page take
precedence.</p>
<p><a class="reference external" href="https://github.com/mantidproject/mantid/wiki/clang-format">This page</a>
describes a tool that you may find useful for checking your code
satisfies LLVM whitespace conventions. It’s also useful to set up your
text editor to use <a class="reference external" href="http://llvm.org/docs/CodingStandards.html#use-spaces-instead-of-tabs">two spaces instead of tabs</a>.</p>
</section>
<section id="files">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Files</a><a class="headerlink" href="#files" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Header files will use the <code class="docutils literal notranslate"><span class="pre">.h</span></code> extension.</p></li>
<li><p>Code body files will use the <code class="docutils literal notranslate"><span class="pre">.cpp</span></code> file extension.</p></li>
<li><p>All <code class="docutils literal notranslate"><span class="pre">.cpp</span></code> files must have a corresponding <code class="docutils literal notranslate"><span class="pre">.h</span></code> file.</p></li>
</ul>
</section>
<section id="headers">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Headers</a><a class="headerlink" href="#headers" title="Permalink to this heading">¶</a></h2>
<section id="header-files">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Header Files</a><a class="headerlink" href="#header-files" title="Permalink to this heading">¶</a></h3>
<p>All header files in a project must have a header comment. In many
cases this will be included as part of the class header, but any
header files that do not contain classes must include the same
information as a file header. The information that must be included
is:</p>
<ul class="simple">
<li><p>class description</p></li>
<li><p>Copyright</p></li>
<li><p>GPL license text</p></li>
</ul>
</section>
<section id="layout-of-header-file">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Layout of Header File</a><a class="headerlink" href="#layout-of-header-file" title="Permalink to this heading">¶</a></h3>
<p>The contents of the header file should be arranged in the following
order:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">once</span></code> header guard to prevent duplicate imports.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#include</span></code> directives in the following order, where each section shold be
sorted alphabetically:</p>
<ul>
<li><p>Main Module Header</p></li>
<li><p>Mantid Headers from the same project</p></li>
<li><p>Mantid headers from other projects</p></li>
<li><p>3rd party library headers</p></li>
<li><p>System <code class="docutils literal notranslate"><span class="pre">#include</span></code> directives</p></li>
</ul>
</li>
<li><p>Any required namespace(s)</p></li>
<li><p>Forward declarations of other classes</p></li>
<li><p>Global constants, enumerations &amp; typedefs</p></li>
<li><p>Doxygen class description</p></li>
<li><p>Class definition:</p>
<ul>
<li><p>Public constants, enumerations &amp; types</p></li>
<li><p>Public constructors &amp; destructors</p></li>
<li><p>Public functions &amp; operators</p></li>
<li><p>Protected functions</p></li>
<li><p>Private constants, enumerations &amp; types</p></li>
<li><p>Private functions</p></li>
<li><p>Private variables</p></li>
<li><p>Bodies of inline functions and (for a template class) member
functions.</p></li>
</ul>
</li>
</ul>
<p>In most cases header files should only contain a single class. The only
exceptions to this should be for internal utility classes, and extremely
small highly related classes such as exception classes.</p>
</section>
<section id="cpp-file-headers">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">CPP file Headers</a><a class="headerlink" href="#cpp-file-headers" title="Permalink to this heading">¶</a></h3>
<p>We will not be including body file headers. The relevant class file
header in the <code class="docutils literal notranslate"><span class="pre">.h</span></code> file will suffice.</p>
</section>
<section id="function-headers">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Function headers</a><a class="headerlink" href="#function-headers" title="Permalink to this heading">¶</a></h3>
<p>These will follow the style put forward in the <a class="reference external" href="http://www.stack.nl/~dimitri/doxygen/docblocks.html">Doxygen documentation</a>.  Headers
comments must be included above all functions definitions and should
describe the function, all parameters and returns values as a minimum.</p>
<p>Where a function is declared in the header file and defined in the
<code class="docutils literal notranslate"><span class="pre">.cpp</span></code> file the following approach should be taken:</p>
<ul class="simple">
<li><p>The header file need only contain documentation for items that do
not appear in a <code class="docutils literal notranslate"><span class="pre">.cpp</span></code> file (e.g. the class itself, member
variables, inlined methods and templated classes). This keeps the
header files compact and easier to read. Brief comments can
optionally be included (as in the example below).</p></li>
</ul>
<p>Example header file function declaration</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">/// Creates an instance of an algorithm</span>
<span class="n">IAlgorithm</span><span class="o">*</span><span class="w"> </span><span class="nf">createAlgorithm</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">algName</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">version</span><span class="p">);</span>
</pre></div>
</div>
<p>Example CPP file function definition</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cm">/** Creates and initialises an instance of an algorithm</span>
<span class="cm"> *</span>
<span class="cm"> * @param algName The name of the algorithm required</span>
<span class="cm"> * @param version The version of the algorithm</span>
<span class="cm"> * @return A pointer to the created algorithm</span>
<span class="cm"> *</span>
<span class="cm"> * @throw NotFoundError Thrown if algorithm requested is not registered</span>
<span class="cm"> */</span>
<span class="w"> </span><span class="n">IAlgorithm</span><span class="o">*</span><span class="w"> </span><span class="nf">FrameworkManagerImpl::createAlgorithm</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">algName</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">version</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">IAlgorithm</span><span class="o">*</span><span class="w"> </span><span class="n">alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AlgorithmManager</span><span class="o">::</span><span class="n">Instance</span><span class="p">().</span><span class="n">create</span><span class="p">(</span><span class="n">algName</span><span class="p">,</span><span class="n">version</span><span class="p">).</span><span class="n">get</span><span class="p">();</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="n">alg</span><span class="p">;</span>
<span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="naming-conventions">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Naming Conventions</a><a class="headerlink" href="#naming-conventions" title="Permalink to this heading">¶</a></h2>
<p>Names should be descriptive and meaningful, but not too long (say &lt;20
characters). This is helped by sensible and consistent (across the
project) use of abbreviations.</p>
<ul class="simple">
<li><p><strong>Constants</strong> (including static const members): All upper
case. Internal words separated by underscore eg: <code class="docutils literal notranslate"><span class="pre">ERROR_NO_DATA</span></code></p></li>
<li><p><strong>Classes, namespaces, structs, enums (and enum values) and typedefs</strong>:
PascalCase (First letter upper case, then lower
case. Internal words begin with upper case letter).</p></li>
<li><p><strong>Function Names</strong>: function names will be in camelCase (starting
with a lower case character and capital for each later word).</p></li>
<li><p><strong>Variable Names / Type Prefixes</strong>: variables will be given sensible
descriptive names. Type prefixes will not be used. variable names
in Mantid are usually camelCase (starting with a lower case
character and capital for each later word).</p></li>
<li><dl class="simple">
<dt><strong>Scope Prefixes</strong></dt><dd><ul>
<li><p>Static member variables use a <code class="docutils literal notranslate"><span class="pre">g_</span></code> prefix.</p></li>
<li><p>Non-static member variables use an <code class="docutils literal notranslate"><span class="pre">m_</span></code> prefix.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><strong>Local variables used as integer loop counters</strong> As an exception,
these may use very short names like <code class="docutils literal notranslate"><span class="pre">i,</span> <span class="pre">j,</span> <span class="pre">k,</span> <span class="pre">l</span></code> eg. <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">(int</span>
<span class="pre">i</span> <span class="pre">=</span> <span class="pre">0;</span> <span class="pre">i</span> <span class="pre">&lt;</span> <span class="pre">5;</span> <span class="pre">i++)</span></code></p></li>
</ul>
</section>
<section id="preprocessor">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Preprocessor</a><a class="headerlink" href="#preprocessor" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Use of the pre-processor should be minimised. Constants and type
aliases should be declared using <code class="docutils literal notranslate"><span class="pre">const</span></code> and <code class="docutils literal notranslate"><span class="pre">typedef</span></code> rather
than <code class="docutils literal notranslate"><span class="pre">#define</span></code>, and functions should be used in favour of macros.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#include</span></code> statements should use quotes (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>) for inclusion of
Mantid code and angle brackets (<code class="docutils literal notranslate"><span class="pre">&lt;&gt;</span></code>) for system files (this
includes headers from <code class="docutils literal notranslate"><span class="pre">Third_Party</span></code>)</p></li>
<li><p>All header files should have guards against repeated inclusion,
with the guard flags named consistently. (See <a class="reference external" href="https://en.wikipedia.org/wiki/Include_guard">here</a> for an
explanation)</p></li>
<li><p>Header files should only include those other header files within
the project that are necessary (e.g. for definition of the base
class).  In many cases a forward declaration of the form <code class="docutils literal notranslate"><span class="pre">class</span>
<span class="pre">CPidClientObject;</span></code> is sufficient, and this helps to avoid cyclical
inclusions of headers.</p></li>
<li><p>It should be possible to compile each header file
individually. That is, a file consisting solely of <code class="docutils literal notranslate"><span class="pre">#include</span>
<span class="pre">&quot;header.h&quot;</span></code> should compile without errors. This avoids
undocumented interdependencies between headers.</p></li>
</ol>
</section>
<section id="classes-and-namespaces">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Classes and Namespaces</a><a class="headerlink" href="#classes-and-namespaces" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>There should be only one class or namespace declared in each header
file. This recommendation should only be relaxed where classes are
closely tied together.</p></li>
<li><p>Namespaces should use the C++-17 nested specifier e.g. <cite>namespace A::B{}</cite></p></li>
<li><p>There should be only one class or namespace defined per body file
(unless classes are closely tied as in (1) above). All the
definitions for that class/namespace should be in the one file
(unless this yields a source file that is unmanageably large).</p></li>
<li><p>Data members should be private. Access to data from other classes
should only be through protected or public methods (or by
‘friends’, but see item 8). Inside a large class, consider
reserving direct access to private data members for a smaller
manageable core of member functions.</p></li>
<li><p>All constructors for a class must initialise all its member variables
that do not have a default constructor (including primitive and
pointer types).</p></li>
<li><p>All base classes must have a virtual destructor.</p>
<ul class="simple">
<li><p>This may be disregarded only in exceptional circumstances when
the overhead of a virtual-table would significantly affect
performance. Such a class must not be subclassed, and must be
adequately commented to warn other developers against subclassing
the class.</p></li>
<li><p>In addition, it is recommended that where possible, programming
techniques are used to prevent inheritance of classes with a
non-virtual destructor. While comments may suffice they can
easily be ignored or misunderstood, particularly by inexperienced
developers</p></li>
</ul>
</li>
<li><p>Classes’ constructors and destructors must not call their own virtual
member functions, directly or indirectly. (C++ does not resolve such
function calls polymorphically.)</p></li>
<li><p>Do not define special members functions when they would be
identical to those automatically generated by the compiler. Use <code class="docutils literal notranslate"><span class="pre">=</span>
<span class="pre">delete</span></code> to remove invalid compiler-generated versions. Consider
following the <a class="reference external" href="https://rmf.io/cxx11/rule-of-zero/">rule-of-zero</a>
and writing an additional class for resource management.</p></li>
<li><p>The use of <code class="docutils literal notranslate"><span class="pre">friend</span></code> should be avoided and its use requires
justification. As an exception, overloads of the <code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code>
operators for serialising the class may be declared as <code class="docutils literal notranslate"><span class="pre">friend</span></code>.</p></li>
<li><p>Use of multiple inheritance should be restricted to cases in which
the second and subsequent base classes are all interfaces. (An
interface in this context is a class consisting only of pure virtual
functions.).</p></li>
<li><p>Virtual inheritance should only be used when the base class
involved is an interface.</p></li>
<li><p>Unions and bitfields should only be used where essential for
performance, or where required for interfacing with a third party
library.</p></li>
</ol>
<section id="mantid-namespaces">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Mantid Namespaces</a><a class="headerlink" href="#mantid-namespaces" title="Permalink to this heading">¶</a></h3>
<p>All Mantid code lives within a minimum of a two tiered namespace. The
outer namespace for all Mantid code is Mantid, and this is followed by
a namespace identifying the library that contains the code. Third and
further level namespaces may be used to section code to further
improve readability and maintenance.</p>
</section>
</section>
<section id="functions-and-variables">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Functions and Variables</a><a class="headerlink" href="#functions-and-variables" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Variables, functions parameters, and function return values must have
explicit types (no defaulting to <code class="docutils literal notranslate"><span class="pre">int</span></code>).</p></li>
<li><p>A function declaration should not use <code class="docutils literal notranslate"><span class="pre">void</span></code> to indicate an empty
parameter list.</p></li>
<li><p>Parameters in function prototypes should include names, not just
their types. For example, use <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">eraseRange(int</span> <span class="pre">nFirst,</span> <span class="pre">int</span>
<span class="pre">nLast);</span></code> rather than <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">eraseRange(int,</span> <span class="pre">int);</span></code> as this
improves self-documentation.</p></li>
<li><p>Non-static member functions should be declared <code class="docutils literal notranslate"><span class="pre">const</span></code> if logically
they do not alter the state of the class instance.</p></li>
<li><p>Simple accessor functions may be inline (e.g. <code class="docutils literal notranslate"><span class="pre">inline</span> <span class="pre">int</span>
<span class="pre">getCount()</span> <span class="pre">const</span> <span class="pre">{</span> <span class="pre">return</span> <span class="pre">m_nCount;}</span></code>). Otherwise, inline
functions should be avoided unless essential for performance.</p></li>
<li><p>Operators should be overloaded sparingly. Operator overloads should
behave in accordance with the semantics of the operator as applied
to primitive types, or according to established conventions
(e.g. <code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> for serialisation).</p></li>
<li><p>‘Magic numbers’ must not be used in the code. Constants and
enumerations must be used instead.</p></li>
</ol>
</section>
<section id="expressions-and-statements">
<h2><a class="toc-backref" href="#id14" role="doc-backlink">Expressions and Statements</a><a class="headerlink" href="#expressions-and-statements" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Integers should not be cast to Booleans. For example, prefer <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(x</span>
<span class="pre">!=</span> <span class="pre">0)</span></code> rather than <code class="docutils literal notranslate"><span class="pre">if(x)</span></code></p></li>
<li><p>The new style type casting must be used in place of the old C style
type casts. If casting up or down an inheritance hierarchy, use
<code class="docutils literal notranslate"><span class="pre">dynamic_cast</span></code> (which performs a run-time type check) rather than
<code class="docutils literal notranslate"><span class="pre">static_cast</span></code>.</p></li>
<li><p>Function calls with side effects, and the <code class="docutils literal notranslate"><span class="pre">++</span></code>/<code class="docutils literal notranslate"><span class="pre">--</span></code>/assignment operators,
should only be called as a standalone statement rather than embedded
inside an expression.</p>
<ul class="simple">
<li><p>It is permissible, although discouraged, to have a function call
with side effects as the right-operand of <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> or <code class="docutils literal notranslate"><span class="pre">||</span></code>. Any such
instances must be commented in detail to alert other developers to
the fact that the function is not always called.</p></li>
</ul>
</li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">for</span></code> loop should only have one control variable, and should
not modify it in the body.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">switch</span></code> statements must include a <code class="docutils literal notranslate"><span class="pre">default</span></code> clause, even if
only to catch errors.</p></li>
<li><p>Each <code class="docutils literal notranslate"><span class="pre">case</span></code> of a <code class="docutils literal notranslate"><span class="pre">switch</span></code> statement must either end with a
<code class="docutils literal notranslate"><span class="pre">break</span></code>/<code class="docutils literal notranslate"><span class="pre">return</span></code>, or contain a clear comment to alert other
developers to the fact that execution will fall through to the next
case. Multiple <code class="docutils literal notranslate"><span class="pre">case</span></code> labels (with no code between them) are,
however, permitted for the same block of code.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">goto</span></code> must be avoided. When there is a need to break out of two
or more nested loops in one go, the loops should be moved to a
separate function where ‘return’ can be used instead.</p></li>
</ol>
</section>
<section id="comments">
<h2><a class="toc-backref" href="#id15" role="doc-backlink">Comments</a><a class="headerlink" href="#comments" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Sufficient commenting (to the level mandated by this document) of a
piece of code must be performed at the same time as the code is
written. It must not be put off until the end of development. When
code is updated, all relevant comments must be updated as well
(including those in the header).</p></li>
<li><p>‘Dead code’ must not be kept in the source code. (‘Dead code’ here
means code that has been commented out or unconditionally
suppressed in some other way, for example using <code class="docutils literal notranslate"><span class="pre">#if</span> <span class="pre">0</span></code>
preprocessor directives.)</p>
<ul class="simple">
<li><p>In the (rare) instances that dead code would serve an important
documentation purpose for ongoing development, the dead code must
be placed in an external location and may be referenced from the
‘live’ source code.</p></li>
</ul>
</li>
<li><p>Comments must be indented to the same level as the code to which
they refer.</p></li>
<li><p>The language used in comments must be professional and to the
point.  Flippant or derogatory remarks must be avoided.</p></li>
<li><p>The collection of comments in a function must, on its own, be
sufficient that a competent C++ developer can pick up the function
for subsequent development.</p></li>
<li><p>Comments on a single line should use <code class="docutils literal notranslate"><span class="pre">//</span></code> rather than <code class="docutils literal notranslate"><span class="pre">/*</span> <span class="pre">…</span> <span class="pre">*/</span></code>.</p></li>
<li><p>No code block should exceed 20 statement lines without a comment of
some sort. In general all code should contain 15% comment lines.</p></li>
<li><p>The style of the comments is not mandated here. However the following
are general recommendations:</p>
<ul class="simple">
<li><p>Comments should always be used to describe potential “difficult”
sections of code utilising, for example, special algorithms</p></li>
<li><p>Comments should be used in particular to explain branch conditions
in <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">...</span> <span class="pre">else</span></code> and <code class="docutils literal notranslate"><span class="pre">switch</span> <span class="pre">{</span> <span class="pre">case</span> <span class="pre">...</span></code>-like statements</p></li>
<li><p><strong>Comments should be written at a higher level of abstraction
than the code to which they pertain, rather than merely
restating it</strong></p></li>
</ul>
</li>
</ol>
</section>
<section id="error-handling">
<h2><a class="toc-backref" href="#id16" role="doc-backlink">Error Handling</a><a class="headerlink" href="#error-handling" title="Permalink to this heading">¶</a></h2>
<p>The type of error handling needed depends on what the code is
doing. In daemon / service type of program almost nothing may be
allowed to cause the process to terminate, whereas in some utility
programs it may be acceptable to terminate for many error
conditions. This is a design issue and the strictness of application
of the following should take into account the use of the code.</p>
<ol class="arabic simple">
<li><p>The developer should identify all errors that can be generated by a
function and ensure that they are dealt with appropriately at some
point in the system. This may be within the function itself or
higher up in the call stack.</p></li>
<li><p>All exceptions must be caught and handled properly. (This may
include terminating the program cleanly, for instance if no more
memory can be allocated.)</p></li>
<li><p>Public functions should check their input parameters before using
them. This checking may be made using the <code class="docutils literal notranslate"><span class="pre">assert()</span></code> macro or
similar mechanism, and so only checked in the debug build, in which
case comprehensive testing must be performed of the release build.</p></li>
<li><p>All error status values returned from a function call must be checked
or explicitly ignored. (To explicitly ignore a function call’s return
value cast it to void, e.g. <code class="docutils literal notranslate"><span class="pre">(void)</span> <span class="pre">f(a,</span> <span class="pre">b);</span></code>)</p></li>
<li><p>When using <code class="docutils literal notranslate"><span class="pre">dynamic_cast</span></code> on a pointer, a check must be made that
the result is not <code class="docutils literal notranslate"><span class="pre">null</span></code> (i.e. that the cast was successful).</p></li>
<li><p>Destructors must not throw any exceptions, directly or indirectly.
(Exceptions encountered while calling destructors during stack
unwinding from an earlier exception will cause immediate program
termination.)</p></li>
<li><p>Where the language permits it, and where the occurrence of errors
can be identified at coding time (e.g. opening a file), errors
should be trapped on an individual basis, rather than using a
catch-all error handler.</p></li>
<li><p>Error messages displayed to the user must be understandable and
informative. They must suggest an action to the user, which will
resolve the problem, for example:</p>
<ul class="simple">
<li><p>No further action is required.</p></li>
<li><p>Check the XYZ input data and then repeat the process.</p></li>
<li><p>Contact the system administrator.</p></li>
</ul>
</li>
</ol>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="CPPModernization.html" title="Previous Chapter: C++ Code Modernization Guidelines"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; C++ Code Mode...</span>
    </a>
  </li>
  <li>
    <a href="GUIStandards.html" title="Next Chapter: GUI Standards"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">GUI Standards &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>