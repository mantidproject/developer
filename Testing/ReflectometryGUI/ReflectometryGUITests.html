<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Reflectometry GUI Testing</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="SANS GUI Testing" href="../SANSGUI/ISISSANSGUITests.html" />
    <link rel="prev" title="Live Data Testing" href="../LiveData/LiveDataTests.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>master</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="../../index.html">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">User Documentation</a></li>
                <li><a href="http://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
<div class="related" role="navigation" aria-label="related navigation">
  <h3>Navigation</h3>
  <ul>
    <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
    
    <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Testing</a> &#187;</li>
    
    
    
    
    <li class="nav-item nav-item-this"><a href="">Reflectometry GUI Testing</a></li>
    
    
  </ul>
</div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <section id="reflectometry-gui-testing">
<span id="id1"></span><h1>Reflectometry GUI Testing<a class="headerlink" href="#reflectometry-gui-testing" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id2">Introduction</a></p></li>
<li><p><a class="reference internal" href="#set-up" id="id3">Set up</a></p></li>
<li><p><a class="reference internal" href="#loading-batch-files" id="id4">Loading batch files</a></p></li>
<li><p><a class="reference internal" href="#changing-the-default-instrument" id="id5">Changing the Default instrument</a></p></li>
<li><p><a class="reference internal" href="#processing-rows" id="id6">Processing Rows</a></p></li>
<li><p><a class="reference internal" href="#processing-groups" id="id7">Processing Groups</a></p></li>
<li><p><a class="reference internal" href="#generating-plots" id="id8">Generating Plots</a></p></li>
<li><p><a class="reference internal" href="#polarisation-corrections" id="id9">Polarisation Corrections</a></p></li>
<li><p><a class="reference internal" href="#search-by-experiment" id="id10">Search by experiment</a></p></li>
<li><p><a class="reference internal" href="#copy-cut-and-paste" id="id11">Copy, Cut and Paste</a></p></li>
<li><p><a class="reference internal" href="#discarding-changes" id="id12">Discarding changes</a></p></li>
<li><p><a class="reference internal" href="#saving-a-batch" id="id13">Saving a batch</a></p></li>
<li><p><a class="reference internal" href="#export-as-ascii" id="id14">Export as ASCII</a></p></li>
<li><p><a class="reference internal" href="#preview-tab" id="id15">Preview tab</a></p></li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>The ISIS Reflectometry interface is a graphical front end for the main ISIS reflectometry reduction algorithm <a class="reference external" href="https://docs.mantidproject.org/nightly/algorithms/ReflectometryISISLoadAndProcess-v1.html#algm-reflectometryisisloadandprocess" title="(in MantidProject v6.6)"><span class="xref std std-ref">ReflectometryISISLoadAndProcess</span></a> and post-processing algorithm <a class="reference external" href="https://docs.mantidproject.org/nightly/algorithms/Stitch1DMany-v1.html#algm-stitch1dmany" title="(in MantidProject v6.6)"><span class="xref std std-ref">Stitch1DMany</span></a>. The purpose of the interface is to speed up the analysis of the Reflectometry spectra by providing batch-mode execution of these algorithms on groups of runs.</p>
</section>
<section id="set-up">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Set up</a><a class="headerlink" href="#set-up" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>These instructions assume use of MantidWorkbench or MantidPlot 3.7 or higher.</p></li>
<li><p>Ensure you have the <a class="reference external" href="http://download.mantidproject.org">ISIS Sample Data</a> in your Mantid user directories.</p></li>
<li><p>Ensure you have added this path to your Mantid user directories: <code class="docutils literal notranslate"><span class="pre">[path</span> <span class="pre">to</span> <span class="pre">your</span> <span class="pre">build</span> <span class="pre">directory]/ExternalData/Testing/Data/UnitTest</span></code>. This is required for testing the Preview tab. If this directory is missing on your computer then you may need to build the <code class="docutils literal notranslate"><span class="pre">AllTests</span></code> target for your local version of Mantid.</p></li>
<li><p>Ensure you have the ISIS archive enabled.</p></li>
<li><p>Open the ISIS Reflectometry interface.</p></li>
<li><p>Go to the menu <code class="docutils literal notranslate"><span class="pre">Tools-&gt;Options</span></code> and ensure all of the warnings are ticked. On the Rounding tab, set the precision to 2 decimal places.</p></li>
</ul>
</section>
<section id="loading-batch-files">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Loading batch files</a><a class="headerlink" href="#loading-batch-files" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Go to the menu <code class="docutils literal notranslate"><span class="pre">Batch-&gt;Load</span></code>.</p></li>
<li><p>Browse to the sample data and select file <code class="docutils literal notranslate"><span class="pre">INTER_NR_test.json</span></code>.</p></li>
<li><p>The interface should be populated with some information, including some content in the runs table.</p></li>
<li><p>Click the <code class="docutils literal notranslate"><span class="pre">Expand</span> <span class="pre">All</span> <span class="pre">Rows</span></code> button on the toolbar to expand the groups in the table.</p></li>
<li><p>The decimal values should be shown to 2 decimal places as per the Options that we set.</p></li>
<li><p>Re-open the same batch file. You should not be prompted with any warnings (unless you changed anything).</p></li>
</ul>
</section>
<section id="changing-the-default-instrument">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Changing the Default instrument</a><a class="headerlink" href="#changing-the-default-instrument" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>At the top-left and bottom-right of the interface is a drop-down menu called <code class="docutils literal notranslate"><span class="pre">Instrument</span></code> - it can switch between INTER, SURF, CRISP, POLREF, and OFFSPEC. Try changing it.</p></li>
<li><p>This should change the instrument for the whole of Mantid - check it by going to <code class="docutils literal notranslate"><span class="pre">File-&gt;Settings</span></code> in the MantidWorkbench main menu.</p></li>
<li><p>Reload the batch file. This should change the instrument back to <code class="docutils literal notranslate"><span class="pre">INTER</span></code>.</p></li>
</ul>
</section>
<section id="processing-rows">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Processing Rows</a><a class="headerlink" href="#processing-rows" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Re-load the batch file to reset the state.</p></li>
<li><p>Select a single row within a group with the mouse.</p></li>
<li><p>Click Process. Some output workspaces should be produced and the row should turn green. (You need to click off the row to see the green highlighting.)</p></li>
<li><p>The process bar along the bottom should go from empty to full.</p></li>
<li><p>Repeat this test for multiple rows (selecting using Shift and Ctrl while clicking with the mouse - a bit like in Excel)</p></li>
<li><p>Once you have processed all rows inside a group, the group header will turn pale green (paler than the rows to indicate the contents are complete but post-processing has not been done).</p></li>
</ul>
</section>
<section id="processing-groups">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Processing Groups</a><a class="headerlink" href="#processing-groups" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Re-load the batch file to clear the state and expand the groups.</p></li>
<li><p>Click on a group header line and clicking Process. This will process all rows in the group as well as post-processing the group itself.</p></li>
<li><p>The group header will turn green (the same shade as the rows).</p></li>
<li><p>Now click off the table to deselect everything, then click Process.</p></li>
<li><p>You will get a warning about processing the whole table - click ok.</p></li>
<li><p>This will now process anything that was left unprocessed.</p></li>
</ul>
</section>
<section id="generating-plots">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Generating Plots</a><a class="headerlink" href="#generating-plots" title="Permalink to this heading">¶</a></h2>
<p>There are two plotting buttons on the toolbar - they look like little plots. The first one plots the individual rows (the reduced output) and the second one plots the post-processed (stitched) output for groups.</p>
<p>Assuming the whole table is processed:</p>
<ul class="simple">
<li><p>Select a group header:</p>
<ul>
<li><p>Plot the reduced data (first plot button) - this plots two lines for the individual reduced rows.</p></li>
<li><p>Plot the stitched data (second plot button) - this plots a single line for the stitched output.</p></li>
</ul>
</li>
<li><p>Select a processed row:</p>
<ul>
<li><p>Plot the reduced data - this plots one line for that reduced row.</p></li>
<li><p>Plot the stitched data - this does nothing for a row.</p></li>
</ul>
</li>
<li><p>We can also over-plot outputs from different groups. Select the whole table with <code class="docutils literal notranslate"><span class="pre">Ctrl-A</span></code>:</p>
<ul>
<li><p>Plot the reduced data - this plots 4 lines (reduced output for all rows).</p></li>
<li><p>Plot the stitched data - this plots 2 lines (stitched output for both groups).</p></li>
</ul>
</li>
</ul>
</section>
<section id="polarisation-corrections">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Polarisation Corrections</a><a class="headerlink" href="#polarisation-corrections" title="Permalink to this heading">¶</a></h2>
<p>Polarisation corrections settings are under the <code class="docutils literal notranslate"><span class="pre">Experiment</span> <span class="pre">Settings</span></code> tab in the interface. These should only work with <code class="docutils literal notranslate"><span class="pre">CRISP</span></code>, <code class="docutils literal notranslate"><span class="pre">POLREF</span></code> or <code class="docutils literal notranslate"><span class="pre">OFFSPEC</span></code>.</p>
<ul class="simple">
<li><p>In the Runs tab set the instrument to <code class="docutils literal notranslate"><span class="pre">INTER</span></code>.</p></li>
<li><p>On the <code class="docutils literal notranslate"><span class="pre">Experiment</span> <span class="pre">Settings</span></code> tab, the Polarisation corrections combo box should be greyed out.</p></li>
<li><p>Change the instrument to <code class="docutils literal notranslate"><span class="pre">OFFSPEC</span></code> and it should now be enabled. Select <code class="docutils literal notranslate"><span class="pre">Parameter</span> <span class="pre">File</span></code>. The corrections combo should still be disabled.</p></li>
<li><p>Switch to <code class="docutils literal notranslate"><span class="pre">Workspace</span></code>. The <code class="docutils literal notranslate"><span class="pre">Polarization</span> <span class="pre">Efficiencies</span></code> combo box should become enabled and show a list of all loaded workspaces.</p></li>
<li><p>Switch to <code class="docutils literal notranslate"><span class="pre">FilePath</span></code>. <code class="docutils literal notranslate"><span class="pre">Polarization</span> <span class="pre">Efficiencies</span></code> should now appear as a line edit. It should appear red for invalid paths and white for valid paths on your system.</p></li>
<li><p>Switch back to the <code class="docutils literal notranslate"><span class="pre">ParameterFile</span></code> setting.</p></li>
<li><p>Back on the <code class="docutils literal notranslate"><span class="pre">Runs</span></code> tab, delete all rows in the table (this can be done by pressing <code class="docutils literal notranslate"><span class="pre">Ctrl-A</span></code> and then <code class="docutils literal notranslate"><span class="pre">Delete</span></code>).</p></li>
<li><p>Note that this will leave an empty row. In that row enter run number <code class="docutils literal notranslate"><span class="pre">44956</span></code> and angle <code class="docutils literal notranslate"><span class="pre">0.4</span></code>.</p></li>
<li><p>Check you can process the row and it turns green.</p></li>
</ul>
</section>
<section id="search-by-experiment">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Search by experiment</a><a class="headerlink" href="#search-by-experiment" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Clear all rows in the Runs table and set the instrument to INTER.</p></li>
<li><p>In the Search box on the left, enter Investigation Id <code class="docutils literal notranslate"><span class="pre">1120015</span></code> and Cycle <code class="docutils literal notranslate"><span class="pre">11_3</span></code>.</p></li>
<li><p>Click <code class="docutils literal notranslate"><span class="pre">Search</span></code> and the results list will fill with all the runs for that experiment.</p></li>
<li><p>Try selecting some of the results and clicking the <code class="docutils literal notranslate"><span class="pre">Transfer</span></code> button.</p></li>
<li><p>The run numbers should be filled into the main Runs table following these rules:</p>
<ul>
<li><p>Runs with the <strong>same title</strong> will appear in the <strong>same group</strong>.</p></li>
<li><p>Runs in the same group with <strong>different angles</strong> will appear on <strong>separate rows</strong>.</p></li>
<li><p>Runs in the same group with the <strong>same angle</strong> will be combined into the <strong>same row</strong>, and shown as a sum e.g. <code class="docutils literal notranslate"><span class="pre">13460+13462</span></code>.</p></li>
<li><p>Runs that are highlighted blue are invalid and will not be transferred. Hover over them to see a message explaining why.</p></li>
<li><p>If the runs are already in the table, they will not be transferred again (i.e. no duplicates).</p></li>
</ul>
</li>
</ul>
</section>
<section id="copy-cut-and-paste">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Copy, Cut and Paste</a><a class="headerlink" href="#copy-cut-and-paste" title="Permalink to this heading">¶</a></h2>
<p>Copy, Cut and Paste are available from the toolbar buttons, the right-click content menu, or the standard Ctrl- C, X, and V shortcuts.</p>
<p>Note that it is very picky about pasting onto the correct destination (i.e. group onto group, row onto row etc.) and gives a confusing error message about “depth and size” if you get it wrong - this just indicates that the operation is not possible.</p>
<p>These operations should work:</p>
<ul class="simple">
<li><p>Select a row, copy it, and paste it onto a different row.</p></li>
<li><p>Select 2 rows from one group, copy them, and paste onto 2 rows in another group.</p></li>
<li><p>Select a group and copy it. Paste it onto another group.</p></li>
<li><p>Copy a group. Deselect everything in the table before you paste. It should be pasted as a new group at the end.</p></li>
</ul>
<p>These operations give an error:</p>
<ul class="simple">
<li><p>Copy a row. Deselect everything and paste. This fails because we don’t know which group to paste into.</p></li>
<li><p>Copy a row and try pasting onto a group. This could in theory append the row into the group but is currently not implemented.</p></li>
<li><p>Copy a group and try pasting onto a row. This is not possible.</p></li>
</ul>
</section>
<section id="discarding-changes">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Discarding changes</a><a class="headerlink" href="#discarding-changes" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Re-load the test batch file.</p></li>
<li><p>Edit the data in the table e.g. change an angle.</p></li>
<li><p>Close the interface using the <cite>x</cite> button at the top.</p></li>
<li><p>You should be warned that unsaved changes will be lost. Click Cancel and nothing should be lost.</p></li>
<li><p>Try again and click OK. The interface should close and discard your changes.</p></li>
<li><p>Repeat the test but instead of closing the interface, now attempt to re-load the batch file.</p></li>
<li><p>You should be warned that this will discard your unsaved changes. Again, the OK and Cancel options should work as expected.</p></li>
</ul>
</section>
<section id="saving-a-batch">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Saving a batch</a><a class="headerlink" href="#saving-a-batch" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Load the test batch file.</p></li>
<li><p>Make some changes to the table or settings that you can easily remember.</p></li>
<li><p>Go <code class="docutils literal notranslate"><span class="pre">Batch-&gt;Save</span></code>. A Save dialog will appear. Select a file to save to and OK it.</p></li>
<li><p>Close and re-open the interface. Note that you should <em>not</em> be prompted about discarding unsaved changes.</p></li>
<li><p>Load your saved batch file and check that the items you changed are restored.</p></li>
</ul>
</section>
<section id="export-as-ascii">
<h2><a class="toc-backref" href="#id14" role="doc-backlink">Export as ASCII</a><a class="headerlink" href="#export-as-ascii" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Load a batch file and process it, if you have not already.</p></li>
<li><p>Go to the Save tab and hit Refresh. The workspaces list will contain all of the workspaces in the ADS.</p></li>
<li><p>Select a workspace in the list that starts with <code class="docutils literal notranslate"><span class="pre">IvsQ</span></code>.</p></li>
<li><p>Type a valid path into the Save path textbox.</p></li>
<li><p>Type something in the prefix field you’d like to use to identify the file. <em>The files are saved in the form [prefix][workspace][ext]</em>.</p></li>
<li><p>In the File Format section, select <code class="docutils literal notranslate"><span class="pre">Custom</span> <span class="pre">format</span> <span class="pre">(*.dat)</span></code>, untick <code class="docutils literal notranslate"><span class="pre">Header</span></code> and <code class="docutils literal notranslate"><span class="pre">Q</span> <span class="pre">resolution</span></code> and set the separator to <code class="docutils literal notranslate"><span class="pre">Comma</span></code>.</p></li>
<li><p>Click <code class="docutils literal notranslate"><span class="pre">Save</span></code> and open the file that should have been saved to the save directory you specified. It should contain 3 columns of numbers, separated by commas.</p></li>
<li><p>Tick <code class="docutils literal notranslate"><span class="pre">Q</span> <span class="pre">resolution</span></code> and re-save. It should now contain 4 columns of numbers.</p></li>
<li><p>Double-click on a workspace name in the left list, e.g. <code class="docutils literal notranslate"><span class="pre">IvsQ_13460</span></code>. The right list should be populated with parameters but be disabled.</p></li>
<li><p>Tick <code class="docutils literal notranslate"><span class="pre">Header</span></code> and the parameters list should be enabled. Select a couple of them, e.g. <code class="docutils literal notranslate"><span class="pre">nperiods</span></code> and <code class="docutils literal notranslate"><span class="pre">run_start</span></code>, and re-save.</p>
<ul>
<li><p>The file should now contain some header text starting with <code class="docutils literal notranslate"><span class="pre">MFT</span></code>.</p></li>
<li><p>Amongst other things this text should contain the logs you selected, e.g. <code class="docutils literal notranslate"><span class="pre">nperiods</span> <span class="pre">:</span> <span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">run_end</span> <span class="pre">:</span> <span class="pre">2011-12-15T14:19:13</span></code>.</p></li>
</ul>
</li>
<li><p>Try changing the separator to spaces or tabs and check that the 3 or 4 columns of numbers are separated using that separator.</p></li>
<li><p>Change the dropdown to <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">column</span> <span class="pre">(*.dat)</span></code>. The checkboxes, separators and parameter settings are not applicable so they should be greyed out. Click save and you should get 3 columns of numbers separated by tabs (including a leading tab). At the top there is an integer indicating the number of lines in the data.</p></li>
<li><p>Change the dropdown to <code class="docutils literal notranslate"><span class="pre">ANSTO,</span> <span class="pre">MotoFit,</span> <span class="pre">4</span> <span class="pre">Column</span> <span class="pre">(*.txt)</span></code>. The settings remain greyed out. Click save and you should get 4 columns of numbers separated by tabs (with no leading tab).</p></li>
<li><p>Change the dropdown to <code class="docutils literal notranslate"><span class="pre">ILL</span> <span class="pre">Cosmos</span> <span class="pre">(*.mft)</span></code>. The settings remain greyed out apart from the parameters which should now be enabled. Click save and you should get 3 columns of numbers padded by spaces (including leading spaces). There should be a header starting <code class="docutils literal notranslate"><span class="pre">MFT</span></code> which includes any parameters you selected, the same as the Custom format.</p></li>
<li><p>Try entering a non-existent or invalid save path and then try to Save. You should get an error saying that the path is invalid.</p></li>
</ul>
</section>
<section id="preview-tab">
<h2><a class="toc-backref" href="#id15" role="doc-backlink">Preview tab</a><a class="headerlink" href="#preview-tab" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Go to the Reduction Preview tab.</p></li>
<li><p>Type <code class="docutils literal notranslate"><span class="pre">INTER45455</span></code> into the <code class="docutils literal notranslate"><span class="pre">Run</span></code> input. Set the <code class="docutils literal notranslate"><span class="pre">Angle</span></code> to <code class="docutils literal notranslate"><span class="pre">1</span></code> and click <code class="docutils literal notranslate"><span class="pre">Load</span></code>. The instrument view plot should display the data. If the plot remains blank then check that you have added the path to your unit test data to your Mantid user directories (see set up instructions).</p></li>
<li><p>Click the rectangle-select button above the plot and draw a region onto the instrument view. The selected detector segments should be summed and the result plotted on the second (slice viewer) plot.</p></li>
<li><p>Check that multiple regions can be added to the instrument view, and that moving and resizing them updates the slice viewer plot.</p></li>
<li><p>Check that you can delete regions from the instrument view by selecting them and pressing the delete key on your keyboard.</p></li>
<li><p>Make sure you have at least one region selected on the instrument view. Then go to the drop-down underneath the color scale (next to the slice viewer plot) and select <code class="docutils literal notranslate"><span class="pre">SymmetricLog10</span></code>. This should allow you to see the counts on the plot more clearly.</p></li>
<li><p>Click the rectangle select button above the slice viewer plot and draw a <code class="docutils literal notranslate"><span class="pre">Signal</span></code> region on the plot. A reduction will now be triggered for the selected spectra and the result plotted on the 1D plot.</p></li>
<li><p>Click the drop-down on the rectangle select button and select <code class="docutils literal notranslate"><span class="pre">Transmission</span></code>. Draw a transmission region onto the slice viewer plot. Then, in the same way, add one or more <code class="docutils literal notranslate"><span class="pre">Background</span></code> regions. The reduction should be re-run each time a region is added:</p>
<ul>
<li><p>You should see the tab quickly disable and re-enable.</p></li>
<li><p>Another run of <code class="docutils literal notranslate"><span class="pre">ReflectometryReductionOneAuto</span></code> will be logged in the Messages bar.</p></li>
<li><p>The 1D plot should update (although this is usually only noticeable when changes are made to the Signal region).</p></li>
</ul>
</li>
<li><p>Check that moving and resizing regions triggers a re-run of the reduction.</p></li>
<li><p>Check that you can delete one of the Background regions by selecting it and pressing delete on your keyboard.</p></li>
<li><p>Click the <code class="docutils literal notranslate"><span class="pre">Apply</span></code> button at the bottom right of the tab. The selected regions of interest should be populated in the lookup table on the Experiment Settings tab.</p></li>
<li><p>Back on the Reduction Preview tab, click the export button above the top left of the 1D plot. This should export a workspace called <code class="docutils literal notranslate"><span class="pre">preview_reduced_ws</span></code> to the ADS.</p></li>
<li><p>Right-click the workspace and select <code class="docutils literal notranslate"><span class="pre">Show</span> <span class="pre">History</span></code>:</p>
<ul>
<li><p>View the history for <code class="docutils literal notranslate"><span class="pre">ReflectometryReductionOneAuto</span></code> and check that the inputs for <code class="docutils literal notranslate"><span class="pre">ProcessingInstructions</span></code>, <code class="docutils literal notranslate"><span class="pre">BackgroundProcessingInstructions</span></code> and <code class="docutils literal notranslate"><span class="pre">TransmissionProcessingInstructions</span></code> correspond to the ranges of spectra you selected.</p></li>
<li><p>View the history for <code class="docutils literal notranslate"><span class="pre">ReflectometryISISSumBanks</span></code> and check that the input for <code class="docutils literal notranslate"><span class="pre">ROIDetectorIDs</span></code> matches the range of detector IDs you selected.</p></li>
</ul>
</li>
<li><p>Back in the Reflectometry interface, go to the Runs tab. In the Process Runs table on the right-hand panel of the tab, enter Run <code class="docutils literal notranslate"><span class="pre">INTER45455</span></code> and Angle <code class="docutils literal notranslate"><span class="pre">1</span></code> into the first child row. Click Process.</p></li>
<li><p>Compare plots of the <code class="docutils literal notranslate"><span class="pre">preview_summed_ws</span></code> (from the Preview reduction) with <code class="docutils literal notranslate"><span class="pre">IvsQ_45455</span></code> (from the batch reduction). They should be the same.</p></li>
<li><p>The plots on the Reduction Preview tab are located within three dockable widgets. Check that the widgets can be undocked, re-docked, re-sized etc. without error or loss of functionality.</p></li>
</ul>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="../LiveData/LiveDataTests.html" title="Previous Chapter: Live Data Testing"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Live Data Testing</span>
    </a>
  </li>
  <li>
    <a href="../SANSGUI/ISISSANSGUITests.html" title="Next Chapter: SANS GUI Testing"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">SANS GUI Testing &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>