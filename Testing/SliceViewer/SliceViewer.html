<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>SliceViewer Testing</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Muon Analysis Test Guides" href="../MuonAnalysis_test_guides/index.html" />
    <link rel="prev" title="Core Testing" href="../Core/Core.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>master</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="../../index.html">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org">Wiki</a></li>
                <li><a href="http://docs.mantidproject.org">User Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="sliceviewer-testing">
<span id="id1"></span><h1>SliceViewer Testing<a class="headerlink" href="#sliceviewer-testing" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id2">Introduction</a></li>
<li><a class="reference internal" href="#data" id="id3">Data</a></li>
<li><a class="reference internal" href="#tests" id="id4">Tests</a><ul>
<li><a class="reference internal" href="#viewing-data" id="id5">1. Viewing Data</a></li>
<li><a class="reference internal" href="#toggle-gridlines-on-off" id="id6">2. Toggle gridlines on/off</a></li>
<li><a class="reference internal" href="#select-axes" id="id7">3. Select Axes</a></li>
<li><a class="reference internal" href="#non-orthogonal-view" id="id8">4. Non-orthogonal view</a></li>
<li><a class="reference internal" href="#cursor-tracking" id="id9">5. Cursor Tracking</a></li>
<li><a class="reference internal" href="#peak-overlay" id="id10">6. Peak Overlay</a></li>
<li><a class="reference internal" href="#toolbar-buttons-for-changing-axis-limits" id="id11">7. Toolbar buttons for changing axis limits</a></li>
<li><a class="reference internal" href="#line-subplots-and-region-of-interest-integration" id="id12">8. Line subplots and Region of Interest integration</a></li>
<li><a class="reference internal" href="#save-image" id="id13">9. Save image</a></li>
<li><a class="reference internal" href="#resizing" id="id14">10. Resizing</a></li>
<li><a class="reference internal" href="#alter-the-underlying-workspace" id="id15">11. Alter the underlying workspace</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id2">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The Sliceviewer in Workbench has the joint functionality of the SpectrumViewer and SliceViewer from MantidPlot. So while the advanced use cases for multi-dimensional diffraction data are important to test, it is also worth checking more basic uses, for example opening a Workspace2D and examining the subplots and dynamic cursor data.</p>
<p>See here for a brief overview of the <a class="reference external" href="https://docs.mantidproject.org/nightly/workbench/sliceviewer.html#sliceviewer" title="(in MantidProject v6.2)"><span>Sliceviewer</span></a>.</p>
</div>
<div class="section" id="data">
<h2><a class="toc-backref" href="#id3">Data</a><a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Load 2D data (normal MatrixWorkspace), simply load <code class="docutils literal notranslate"><span class="pre">CNCS_7860_event.nxs</span></code> from the <a class="reference external" href="https://download.mantidproject.org/">TrainingCourseData</a>. We will also load in some SXD data later on, it is good to test the Sliceviewer on both MatrixWorkspaces as the CNCS data was taken in event mode and the SXD data in histogram mode.</li>
<li>Create fake 4D data and take a 3D and 2D cut:</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">md_4D</span> <span class="o">=</span> <span class="n">CreateMDWorkspace</span><span class="p">(</span><span class="n">Dimensions</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">Extents</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="n">Names</span><span class="o">=</span><span class="s2">&quot;H,K,L,E&quot;</span><span class="p">,</span> <span class="n">Frames</span><span class="o">=</span><span class="s1">&#39;HKL,HKL,HKL,General Frame&#39;</span><span class="p">,</span><span class="n">Units</span><span class="o">=</span><span class="s1">&#39;r.l.u.,r.l.u.,r.l.u.,meV&#39;</span><span class="p">)</span>
<span class="n">FakeMDEventData</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">md_4D</span><span class="p">,</span> <span class="n">PeakParams</span><span class="o">=</span><span class="s1">&#39;500000,0,0,0,0,3&#39;</span><span class="p">)</span> <span class="c1"># 4D data</span>
<span class="c1"># Create a histogrammed (binned) workspace with 100 bins in each of the H, K and L dimensions</span>
<span class="n">mdHisto_3D</span> <span class="o">=</span> <span class="n">BinMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">md_4D</span><span class="p">,</span> <span class="n">AlignedDim0</span><span class="o">=</span><span class="s1">&#39;H,-1,1,100&#39;</span><span class="p">,</span> <span class="n">AlignedDim1</span><span class="o">=</span><span class="s1">&#39;K,-1,1,100&#39;</span><span class="p">,</span> <span class="n">AlignedDim2</span><span class="o">=</span><span class="s1">&#39;L,-1,1,100&#39;</span><span class="p">)</span> <span class="c1"># 3D cut</span>
<span class="n">mdHisto_2D</span> <span class="o">=</span> <span class="n">BinMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">md_4D</span><span class="p">,</span> <span class="n">AlignedDim0</span><span class="o">=</span><span class="s1">&#39;H,-1,1,100&#39;</span><span class="p">,</span> <span class="n">AlignedDim1</span><span class="o">=</span><span class="s1">&#39;K,-1,1,100&#39;</span><span class="p">)</span> <span class="c1"># 2D cut</span>
</pre></div>
</div>
<ul class="simple">
<li>Create an MD workspace with non-orthogonal axes:</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># SXD23767.raw is available in the TrainingCourseData from the downloads page</span>
<span class="n">SXD23767</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;SXD23767.raw&#39;</span><span class="p">,</span> <span class="n">LoadMonitors</span><span class="o">=</span><span class="s1">&#39;Exclude&#39;</span><span class="p">)</span>
<span class="c1"># Set some UB with angles we can play with</span>
<span class="n">SetUB</span><span class="p">(</span><span class="n">SXD23767</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">120</span><span class="p">)</span>
<span class="n">SXD_MD_nonortho</span> <span class="o">=</span> <span class="n">ConvertToDiffractionMDWorkspace</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;SXD23767&#39;</span><span class="p">,</span> <span class="n">OutputDimensions</span><span class="o">=</span><span class="s1">&#39;HKL&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/MBC_PickDemo.png"><img alt="MBC_PickDemo.png" src="../../_images/MBC_PickDemo.png" style="width: 75%;" /></a>
</div>
<ul class="simple">
<li>Create PeaksWorkspaces for the SXD data:<ul>
<li>Open instrument viewer by right-clicking on the workspace``SXD23767``.</li>
<li>On the <em>Pick</em> tab, select the <img alt="PickTabAddPeakButton.png" src="../../_images/PickTabAddPeakButton.png" /> “Add a single crystal peak” button.</li>
<li>Click on an intense bragg peak on the detectors, and then click on one or many of the intense peaks in the produced mini-plot. Repeat for a few different bragg peaks across the detectors.</li>
<li>Notice that this has produced a <code class="docutils literal notranslate"><span class="pre">SingleCrystalPeakTable</span></code>.</li>
<li>Create another peak table which we will use to integrate (note in order to index these peaks we find the actual UB matrix which happens to be orthogonal - this is not a problem for test purposes)</li>
</ul>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">FindSXPeaks</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;SXD23767&#39;</span><span class="p">,</span> <span class="n">PeakFindingStrategy</span><span class="o">=</span><span class="s1">&#39;AllPeaks&#39;</span><span class="p">,</span> <span class="n">AbsoluteBackground</span><span class="o">=</span><span class="mi">1500</span><span class="p">,</span> <span class="n">ResolutionStrategy</span><span class="o">=</span><span class="s1">&#39;AbsoluteResolution&#39;</span><span class="p">,</span> <span class="n">XResolution</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">PhiResolution</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">TwoThetaResolution</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;peaks&#39;</span><span class="p">)</span>
<span class="n">FindUBUsingLatticeParameters</span><span class="p">(</span><span class="n">PeaksWorkspace</span><span class="o">=</span><span class="s1">&#39;peaks&#39;</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mf">5.65</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mf">5.65</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mf">5.65</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">beta</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">FixParameters</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">IndexPeaks</span><span class="p">(</span><span class="n">PeaksWorkspace</span><span class="o">=</span><span class="s1">&#39;peaks&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>Create an Integrated PeaksWorkspace:</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">peaks</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;peaks&#39;</span><span class="p">]</span>
<span class="n">integrated_peaks</span> <span class="o">=</span> <span class="n">IntegratePeaksMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;SXD_MD_nonortho&#39;</span><span class="p">,</span> <span class="n">PeaksWorkspace</span><span class="o">=</span><span class="s1">&#39;peaks&#39;</span><span class="p">,</span>\
     <span class="n">PeakRadius</span><span class="o">=</span><span class="mf">0.12</span><span class="p">,</span> <span class="n">BackgroundOuterRadius</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">BackgroundInnerRadius</span><span class="o">=</span><span class="mf">0.16</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="tests">
<h2><a class="toc-backref" href="#id4">Tests</a><a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h2>
<p>Remember to SliceView MatrixWorkspaces and 2D,3D,4D and non-orthogonal MD objects.</p>
<div class="section" id="viewing-data">
<h3><a class="toc-backref" href="#id5">1. Viewing Data</a><a class="headerlink" href="#viewing-data" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>For the data types above:</dt>
<dd><ul class="first last simple">
<li>Change the number of bins displayed</li>
<li>Move the sliders (this applies only to 3D and 4D MD workspaces - i.e. <code class="docutils literal notranslate"><span class="pre">SXD_MD_nonortho</span></code>, <code class="docutils literal notranslate"><span class="pre">md_4D</span></code>, <code class="docutils literal notranslate"><span class="pre">mdHisto_3D</span></code>)</li>
<li>Edit color limits, colormap, scale(lin/log), etc.</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="toggle-gridlines-on-off">
<h3><a class="toc-backref" href="#id6">2. Toggle gridlines on/off</a><a class="headerlink" href="#toggle-gridlines-on-off" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>For normal and non-orthogonal axes data</li>
</ul>
</div>
<div class="section" id="select-axes">
<h3><a class="toc-backref" href="#id7">3. Select Axes</a><a class="headerlink" href="#select-axes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Change the axes that are displayed by selecting the relevant <code class="docutils literal notranslate"><span class="pre">X</span></code> and <code class="docutils literal notranslate"><span class="pre">Y</span></code> axes in the top left. This is more interesting for higher dimension data.</li>
</ul>
</div>
<div class="section" id="non-orthogonal-view">
<h3><a class="toc-backref" href="#id8">4. Non-orthogonal view</a><a class="headerlink" href="#non-orthogonal-view" title="Permalink to this headline">¶</a></h3>
<ol class="upperalpha simple">
<li>For the <code class="docutils literal notranslate"><span class="pre">SXD_MD_nonortho</span></code> workspace, the non-orthogonal view button (see below) should be enabled - clicking this should also turn on grid lines. When viewing the H and K axes you should see the gridlines are no longer perpendicular to each other.</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/wb-sliceviewer51-nonorthobutton.png" class="screenshot" src="../../_images/wb-sliceviewer51-nonorthobutton.png" />
</div>
<ol class="upperalpha simple" start="2">
<li>This tests that the sliceviewer gets the correct basis vectors for an <code class="docutils literal notranslate"><span class="pre">MDHisto</span></code> object from a non-axis aligned cut.</li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">CreateMDWorkspace</span><span class="p">(</span><span class="n">Dimensions</span><span class="o">=</span><span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="n">Extents</span><span class="o">=</span><span class="s1">&#39;-3,3,-3,3,-3,3&#39;</span><span class="p">,</span>
                   <span class="n">Names</span><span class="o">=</span><span class="s1">&#39;H,K,L&#39;</span><span class="p">,</span> <span class="n">Units</span><span class="o">=</span><span class="s1">&#39;r.l.u.,r.l.u.,r.l.u.&#39;</span><span class="p">,</span>
                   <span class="n">Frames</span><span class="o">=</span><span class="s1">&#39;HKL,HKL,HKL&#39;</span><span class="p">,</span>
                   <span class="n">SplitInto</span><span class="o">=</span><span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="n">SplitThreshold</span><span class="o">=</span><span class="s1">&#39;10&#39;</span><span class="p">)</span>
<span class="n">expt_info</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="n">ws</span><span class="o">.</span><span class="n">addExperimentInfo</span><span class="p">(</span><span class="n">expt_info</span><span class="p">)</span>
<span class="n">SetUB</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">120</span><span class="p">)</span>
<span class="n">BinMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">AxisAligned</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">BasisVector0</span><span class="o">=</span><span class="s1">&#39;[00L],r.l.u.,0,0,1&#39;</span><span class="p">,</span>
    <span class="n">BasisVector1</span><span class="o">=</span><span class="s1">&#39;[HH0],r.l.u.,1,1,0&#39;</span><span class="p">,</span>
    <span class="n">BasisVector2</span><span class="o">=</span><span class="s1">&#39;[-HH0],r.l.u.,-1,1,0&#39;</span><span class="p">,</span>
    <span class="n">OutputExtents</span><span class="o">=</span><span class="s1">&#39;-4,4,-4,4,-0.25,0.25&#39;</span><span class="p">,</span>
    <span class="n">OutputBins</span><span class="o">=</span><span class="s1">&#39;101,101,1&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;ws_slice&#39;</span><span class="p">,</span> <span class="n">NormalizeBasisVectors</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>Run the above code and open <code class="docutils literal notranslate"><span class="pre">ws_slice</span></code> in the sliceviewer.</li>
<li>Check that non-orthogonal view is enabled on opening - however when clicked the gridlines are orthogonal  (in this case 110 is orthogonal to 001).</li>
</ul>
<ol class="upperalpha simple" start="3">
<li>Check that changing the properties of the workspace that governs the support for the non-orthogonal transform closes the sliceviewer window.</li>
</ol>
<ul class="simple">
<li>Open <code class="docutils literal notranslate"><span class="pre">ws</span></code> from the above test script in the sliceviewer</li>
<li>Run <code class="docutils literal notranslate"><span class="pre">ClearUB(ws)</span></code> (it should close sliceviewer with warning <code class="docutils literal notranslate"><span class="pre">property</span> <span class="pre">supports_nonorthogonal_axes</span> <span class="pre">is</span> <span class="pre">different...</span></code>)</li>
<li>Instead of clearing the UB you can also replace the workspace with a workspace of a different frame that doesn’t support the non-orthogonal view (e.g. QLab)</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">CreateMDWorkspace</span><span class="p">(</span><span class="n">Dimensions</span><span class="o">=</span><span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="n">Extents</span><span class="o">=</span><span class="s1">&#39;-6,6,-4,4,-0.5,0.5&#39;</span><span class="p">,</span>
        <span class="n">Names</span><span class="o">=</span><span class="s1">&#39;Q1,Q2,Q3&#39;</span><span class="p">,</span> <span class="n">Units</span><span class="o">=</span><span class="s1">&#39;Ang-1,Ang-1,Ang-1&#39;</span><span class="p">,</span>
        <span class="n">Frames</span><span class="o">=</span><span class="s1">&#39;QLab,QLab,QLab&#39;</span><span class="p">,</span>
        <span class="n">SplitInto</span><span class="o">=</span><span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="n">SplitThreshold</span><span class="o">=</span><span class="s1">&#39;50&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ol class="upperalpha simple" start="4">
<li>Check that the non-orthogonal view is disabled for non-Q axes such as energy</li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ws_4D</span> <span class="o">=</span> <span class="n">CreateMDWorkspace</span><span class="p">(</span><span class="n">Dimensions</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">Extents</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">Names</span><span class="o">=</span><span class="s2">&quot;E,H,K,L&quot;</span><span class="p">,</span>
                              <span class="n">Frames</span><span class="o">=</span><span class="s1">&#39;General Frame,HKL,HKL,HKL&#39;</span><span class="p">,</span> <span class="n">Units</span><span class="o">=</span><span class="s1">&#39;meV,r.l.u.,r.l.u.,r.l.u.&#39;</span><span class="p">)</span>
<span class="n">expt_info_4D</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="n">ws_4D</span><span class="o">.</span><span class="n">addExperimentInfo</span><span class="p">(</span><span class="n">expt_info_4D</span><span class="p">)</span>
<span class="n">SetUB</span><span class="p">(</span><span class="n">ws_4D</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">120</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>When the Energy axis is viewed (as X or Y) the non-orthogonal view is disabled. The button should be re-enabled when you view two Q-axes e.g. H and K.</li>
</ul>
</div>
<div class="section" id="cursor-tracking">
<h3><a class="toc-backref" href="#id9">5. Cursor Tracking</a><a class="headerlink" href="#cursor-tracking" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Toggle “Track Cursor” on/off and check the cursor data makes sense</li>
<li>For a MatrixWorkspace (e.g. <code class="docutils literal notranslate"><span class="pre">SXD23767</span></code>) there is much more information than for an MD object. See <a class="reference external" href="https://docs.mantidproject.org/nightly/workbench/sliceviewer.html#sliceviewer-cursor" title="(in MantidProject v6.2)"><span class="xref std std-ref">Cursor Information Widget</span></a> for more details.</li>
</ul>
</div>
<div class="section" id="peak-overlay">
<h3><a class="toc-backref" href="#id10">6. Peak Overlay</a><a class="headerlink" href="#peak-overlay" title="Permalink to this headline">¶</a></h3>
<p>This functionality only applies only to 3D MD workspaces - specifically you should test this on the <code class="docutils literal notranslate"><span class="pre">SXD_MD_nonortho</span></code> workspace.</p>
<div class="figure align-center">
<img alt="../../_images/wb-sliceviewer51-peaksbutton.png" class="screenshot" src="../../_images/wb-sliceviewer51-peaksbutton.png" />
</div>
<ul class="simple">
<li>Select the peak overlay button to choose which PeakWorkspace/s to overlay.</li>
<li>Click on different peaks in the peak sorting table to zoom in on a peak.</li>
<li>Try overlaying multiple peaks workspaces</li>
<li>Overlay Integrated peaks and observe the peak radius and background shell
(see <em>Calculations</em> section of <a class="reference external" href="https://docs.mantidproject.org/nightly/algorithms/IntegratePeaksMD-v2.html#algm-integratepeaksmd" title="(in MantidProject v6.2)"><span>IntegratePeaksMD v2</span></a>) as displayed in the image below.</li>
<li>Click on a column title in the peak table to sort by that value, such as <code class="docutils literal notranslate"><span class="pre">DetID</span></code></li>
<li>Zooming in on peaks, and check that the data and peak move together</li>
<li>Repeat step 2. (Select Axes) with peaks shown</li>
<li>Repeat these instructions with non-orthogonal view enabled.</li>
<li>Peak overlay should not be shown for 2D data</li>
</ul>
<div class="figure align-center">
<a class="screenshot reference internal image-reference" href="../../_images/wb-sliceviewer51-peaksoverlay.png"><img alt="../../_images/wb-sliceviewer51-peaksoverlay.png" class="screenshot" src="../../_images/wb-sliceviewer51-peaksoverlay.png" style="width: 75%;" /></a>
</div>
</div>
<div class="section" id="toolbar-buttons-for-changing-axis-limits">
<h3><a class="toc-backref" href="#id11">7. Toolbar buttons for changing axis limits</a><a class="headerlink" href="#toolbar-buttons-for-changing-axis-limits" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Home</li>
<li>Pan + Stretch</li>
<li>Zoom (dynamic rebinning to <code class="docutils literal notranslate"><span class="pre">_svrebinned</span></code> workspace for MD workspace) - both by selecting region with mouse and scrolling</li>
</ul>
</div>
<div class="section" id="line-subplots-and-region-of-interest-integration">
<h3><a class="toc-backref" href="#id12">8. Line subplots and Region of Interest integration</a><a class="headerlink" href="#line-subplots-and-region-of-interest-integration" title="Permalink to this headline">¶</a></h3>
<p><strong>(this functionality is disabled when non-orthogonal view is enabled)</strong></p>
<div class="figure align-center">
<img alt="../../_images/wb-sliceviewer51-roibutton.png" class="screenshot" src="../../_images/wb-sliceviewer51-roibutton.png" />
</div>
<ul class="simple">
<li>Select the toolbar button for region of interest integration</li>
<li>Draw a shape to integrate over on the image and notice the line subplots change</li>
<li><dl class="first docutils">
<dt>Test the keyboard options in the bottom status bar message to output to workspaces</dt>
<dd><ul class="first last">
<li>Output the cuts displayed on line-subplots, for axis: x = X , y = Y, c = Both</li>
<li>Output slice over the region of interest box: r = roi</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Also, test that the basic Line-subplots toolbar button (to the left of ROI integration button) works.</dt>
<dd><ul class="first last">
<li>Check keyboard options for cuts displayed on line-subplots, for axis: x = X , y = Y, c = Both</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="figure align-center">
<a class="screenshot reference internal image-reference" href="../../_images/wb-sliceviewer51-roi.png"><img alt="../../_images/wb-sliceviewer51-roi.png" class="screenshot" src="../../_images/wb-sliceviewer51-roi.png" style="width: 75%;" /></a>
</div>
</div>
<div class="section" id="save-image">
<h3><a class="toc-backref" href="#id13">9. Save image</a><a class="headerlink" href="#save-image" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Use the Save image toolbar button, in many instances, such as with peaks overlaid</li>
<li>In future there will also be a toolbar button to copy the image to clipboard</li>
</ul>
</div>
<div class="section" id="resizing">
<h3><a class="toc-backref" href="#id14">10. Resizing</a><a class="headerlink" href="#resizing" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Play around with resizing the window and adjusting the size of the peak table**</li>
</ul>
</div>
<div class="section" id="alter-the-underlying-workspace">
<h3><a class="toc-backref" href="#id15">11. Alter the underlying workspace</a><a class="headerlink" href="#alter-the-underlying-workspace" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Delete the workspace and Sliceviewer should close</li>
<li>Rename the workspace and Sliceviewer should stay open and continue to work</li>
<li>Change the data in the workspace by cropping or running some algorithm (e.g. double the data <code class="docutils literal notranslate"><span class="pre">SXD_MD_nonortho</span> <span class="pre">*=</span> <span class="pre">2</span></code>)</li>
<li>Delete rows or re-integrate a PeaksWorkspace that is overlaid.</li>
</ul>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="../Core/Core.html" title="Previous Chapter: Core Testing"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Core Testing</span>
    </a>
  </li>
  <li>
    <a href="../MuonAnalysis_test_guides/index.html" title="Next Chapter: Muon Analysis Test Guides"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Muon Analysis... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>