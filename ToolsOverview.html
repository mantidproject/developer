<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Tools Overview</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Work flows algorithm profiling" href="AlgorithmProfiler.html" />
    <link rel="prev" title="Design Document Guidelines" href="DesignDocumentGuides.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>master</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="index.html">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org">Wiki</a></li>
                <li><a href="http://docs.mantidproject.org">User Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="tools-overview">
<span id="toolsoverview"></span><h1>Tools Overview<a class="headerlink" href="#tools-overview" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="contents local topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#creating-classes-class-maker-py" id="id1">Creating classes: class_maker.py</a></li>
<li><a class="reference internal" href="#moving-renaming-classes-move-class-py" id="id2">Moving/Renaming classes: move_class.py</a></li>
<li><a class="reference internal" href="#deleting-a-class-delete-class-py" id="id3">Deleting a class: delete_class.py</a></li>
<li><a class="reference internal" href="#profiling" id="id4">Profiling</a></li>
<li><a class="reference internal" href="#leak-checking-etc" id="id5">Leak checking etc</a><ul>
<li><a class="reference internal" href="#linux" id="id6">Linux</a></li>
<li><a class="reference internal" href="#windows" id="id7">Windows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#thread-checking" id="id8">Thread checking</a><ul>
<li><a class="reference internal" href="#helgrind-or-drd" id="id9">Helgrind or  drd</a></li>
</ul>
</li>
<li><a class="reference internal" href="#iwyu" id="id10">IWYU</a></li>
<li><a class="reference internal" href="#network-related-tools" id="id11">Network Related Tools</a><ul>
<li><a class="reference internal" href="#wireshark" id="id12">Wireshark</a></li>
<li><a class="reference internal" href="#wonder-shaper" id="id13">Wonder Shaper</a></li>
</ul>
</li>
<li><a class="reference internal" href="#convert-wiki-docs-to-sphinx" id="id14">Convert Wiki Docs to Sphinx</a><ul>
<li><a class="reference internal" href="#use" id="id15">Use</a></li>
</ul>
</li>
<li><a class="reference internal" href="#clang-tidy" id="id16">Clang-tidy</a><ul>
<li><a class="reference internal" href="#installing" id="id17">Installing</a></li>
<li><a class="reference internal" href="#visual-studio" id="id18">Visual Studio</a></li>
<li><a class="reference internal" href="#cmake" id="id19">Cmake</a></li>
<li><a class="reference internal" href="#options" id="id20">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cmake-format" id="id21">CMake-format</a></li>
</ul>
</div>
<div class="section" id="creating-classes-class-maker-py">
<h2><a class="toc-backref" href="#id1">Creating classes: class_maker.py</a><a class="headerlink" href="#creating-classes-class-maker-py" title="Permalink to this headline">¶</a></h2>
<p><strong>To make it faster to create a new class</strong>. This is a small python
script located in /buildconfig/. It generates the .cpp, .h and test
files for a class along with some code stubs. It can also flesh out more
methods for new Algorithms, using the “–alg” option.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre>usage: class_maker.py [-h] [--force] [--test] [--alg] SUBPROJECT CLASSNAME
Utility to create Mantid class files: header, source and test.
positional arguments:
 SUBPROJECT  The subproject under Framework/; e.g. Kernel
 CLASSNAME   Name of the class to create
optional arguments:
 -h, --help  show this help message and exit
 --force     Force overwriting existing files. Use with caution!
 --test      Create only the test file.
 --alg       Create an Algorithm stub. This adds some methods common to
             algorithms.
</pre></div>
</div>
</div>
<div class="section" id="moving-renaming-classes-move-class-py">
<h2><a class="toc-backref" href="#id2">Moving/Renaming classes: move_class.py</a><a class="headerlink" href="#moving-renaming-classes-move-class-py" title="Permalink to this headline">¶</a></h2>
<p>This python script is located in in /buidconfig/. It will move a class
from one subproject to another and/or rename the class. Namespaces and
cmakelists are adjusted. For details, run:</p>
<p><code class="docutils literal notranslate"><span class="pre">buildconfig/move_class.py</span> <span class="pre">--help</span></code></p>
</div>
<div class="section" id="deleting-a-class-delete-class-py">
<h2><a class="toc-backref" href="#id3">Deleting a class: delete_class.py</a><a class="headerlink" href="#deleting-a-class-delete-class-py" title="Permalink to this headline">¶</a></h2>
<p>This python script is located in in /buildconfig/. It will delete a
class from one subproject. CMakeList.txt is adjusted. For details, run:</p>
<p><code class="docutils literal notranslate"><span class="pre">buildconfig/delete_class.py</span> <span class="pre">--help</span></code></p>
</div>
<div class="section" id="profiling">
<h2><a class="toc-backref" href="#id4">Profiling</a><a class="headerlink" href="#profiling" title="Permalink to this headline">¶</a></h2>
<p>Profiling could mean tracking start-up, the progress of an algoirthm or performance. See <a class="reference internal" href="ProfilingOverview.html"><span class="doc">Profiling Overview</span></a> for more details.</p>
</div>
<div class="section" id="leak-checking-etc">
<h2><a class="toc-backref" href="#id5">Leak checking etc</a><a class="headerlink" href="#leak-checking-etc" title="Permalink to this headline">¶</a></h2>
<div class="section" id="linux">
<h3><a class="toc-backref" href="#id6">Linux</a><a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://valgrind.org/docs/manual/mc-manual.html">Memcheck</a></p>
<ul class="simple">
<li>Keeps track of allocs/deallocs and reports anything missing at exit.</li>
<li>Slow but thorough</li>
<li>Useful options to run with</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">valgrind</span> <span class="pre">--tool=memcheck</span> <span class="pre">--leak-check=full</span> <span class="pre">--show-reachable=yes</span> <span class="pre">--num-callers=20</span> <span class="pre">--track-fds=yes</span> <span class="pre">--track-origins=yes</span> <span class="pre">--freelist-vol=500000000</span> <span class="pre">``\</span> <span class="pre">\</span> <span class="pre">``</span> <span class="pre">[args...]</span></code></p>
</div>
<div class="section" id="windows">
<h3><a class="toc-backref" href="#id7">Windows</a><a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://vld.codeplex.com/releases">Visual Leak Detector</a></p>
<ol class="arabic simple">
<li>Setup the additional paths as defined in the readme file</li>
<li>Adjust the configuration file, “C:Program FilesVisual Leak
Detectorvld.ini” to output to both File and debugger by changing the
<code class="docutils literal notranslate"><span class="pre">ReportTo</span></code> to</li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">ReportTo</span> <span class="pre">=</span> <span class="pre">both</span></code></p>
<ol class="arabic simple">
<li>Add #include &lt;vld.h&gt; to the system.h file in Kernel</li>
<li>Compile everything in debug</li>
<li>Running unit tests should now create a file memory_leak_report.txt in
the test directory.</li>
<li>IMPORTANT remove the #include &lt;vld.ini&gt; before checking in.</li>
</ol>
</div>
</div>
<div class="section" id="thread-checking">
<h2><a class="toc-backref" href="#id8">Thread checking</a><a class="headerlink" href="#thread-checking" title="Permalink to this headline">¶</a></h2>
<div class="section" id="helgrind-or-drd">
<h3><a class="reference external" href="http://valgrind.org/docs/manual/hg-manual.html">Helgrind</a> or  <a class="reference external" href="http://valgrind.org/docs/manual/drd-manual.html">drd</a><a class="headerlink" href="#helgrind-or-drd" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Identifies race conditions &amp; dead-locks</li>
<li>Slow but accurate</li>
<li>A pain to get working with OpenMP. GCC must be recompiled to use a different call to create OMP threads or helgrind/drd cannot “see” the thread calls. Use this <a class="reference external" href="https://github.com/UCSCSlang/Adversarial-Helgrind/raw/master/drd/scripts/download-and-build-gcc">script</a> to recompile the same version off gcc that is onyour system. The script will need editing to change the appropriate variables.</li>
</ul>
</div>
</div>
<div class="section" id="iwyu">
<h2><a class="toc-backref" href="#id10">IWYU</a><a class="headerlink" href="#iwyu" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://code.google.com/p/include-what-you-use/">include what you
use</a> (iwyu) is a
clang-based tool for determining what include statements are needed in
C/C++ files. Below are instructions for getting it to run with mantid on
linux which is a filled in version of <a class="reference external" href="https://code.google.com/p/include-what-you-use/issues/detail?id=164">this
bug</a>.</p>
<ol class="arabic simple">
<li>Install the software. The version available from system installs
should be fine (e.g. yum or apt-get).</li>
<li>Get a copy of
<a class="reference external" href="https://code.google.com/p/include-what-you-use/source/browse/trunk/iwyu_tool.py">iwyu_tool.py</a>
which is in the project’s repository, but may not be installed if you
got it from your operating system locations (e.g. yum).</li>
<li>Run <code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">-DCMAKE_EXPORT_COMPILE_COMMANDS=TRUE</span></code>. This will
generate an extra file, <code class="docutils literal notranslate"><span class="pre">compile_commands.json</span></code>, in your build area
which has instructions on compiling every file in mantid.</li>
<li>Run <code class="docutils literal notranslate"><span class="pre">iwyu_tool.py</span> <span class="pre">-p</span> <span class="pre">`pwd</span></code> 2&gt; iwyu.log` to generate the
report of changes redirecting into the file <code class="docutils literal notranslate"><span class="pre">iwyu.log</span></code>. This will
take a long time since it is going through the whole repository. If
you want it for a single file, then supply that as an additional
argument with full path. Only one file can be supplied at a time.</li>
<li>Run <code class="docutils literal notranslate"><span class="pre">fix_includes</span> <span class="pre">&lt;</span> <span class="pre">iwyu.log</span></code> and compile the results. Depending on
how you installed iwyu, the program may be called
<code class="docutils literal notranslate"><span class="pre">fix_includes.py</span></code>. If it doesn’t compile, the most likely suspect
is that iwyu included a private header. See <a class="reference external" href="https://code.google.com/p/include-what-you-use/wiki/InstructionsForUsers#How_to_Run">iwyu instructions for
users</a>
for ways to handle this. Generally, they suggest deleting the
offending lines.</li>
<li>Check that your build path didn’t make it into source files. Since
<code class="docutils literal notranslate"><span class="pre">compile_commands.json</span></code> has full paths, iwyu will put full paths in
the include statements. This will not produce an error on your
system, but it will on the build servers. The easiest way to check is
to use <a class="reference external" href="https://github.com/ggreer/the_silver_searcher">the silver
searcher</a> to check
for your username in your source tree.</li>
<li>Enjoy your success.</li>
</ol>
<p><strong>Note:</strong> <code class="docutils literal notranslate"><span class="pre">iwyu</span></code> outputs to <code class="docutils literal notranslate"><span class="pre">stderr</span></code> and always returns a failure
status code since it generates no output. The output stream also affects
<code class="docutils literal notranslate"><span class="pre">iwyu_tool.py</span></code></p>
</div>
<div class="section" id="network-related-tools">
<h2><a class="toc-backref" href="#id11">Network Related Tools</a><a class="headerlink" href="#network-related-tools" title="Permalink to this headline">¶</a></h2>
<div class="section" id="wireshark">
<h3><a class="toc-backref" href="#id12">Wireshark</a><a class="headerlink" href="#wireshark" title="Permalink to this headline">¶</a></h3>
<p>Linux distros should have this in their repositories. For other platforms download it from <a class="reference external" href="https://www.wireshark.org">https://www.wireshark.org</a>.</p>
<p>Cross-platform tool for inspecting network packets. This is useful to troubleshoot many different types of
network-related problems.</p>
</div>
<div class="section" id="wonder-shaper">
<h3><a class="toc-backref" href="#id13">Wonder Shaper</a><a class="headerlink" href="#wonder-shaper" title="Permalink to this headline">¶</a></h3>
<p>Linux only. Install it from your distro’s repository.</p>
<p>Wonder Shaper allows the user to limit the bandwidth of one or more network adapters. This is useful for debugging
issues when a network interface is still active but very slow. More details can be found at <a class="reference external" href="http://xmodulo.com/limit-network-bandwidth-linux.html">http://xmodulo.com/limit-network-bandwidth-linux.html</a>.</p>
</div>
</div>
<div class="section" id="convert-wiki-docs-to-sphinx">
<h2><a class="toc-backref" href="#id14">Convert Wiki Docs to Sphinx</a><a class="headerlink" href="#convert-wiki-docs-to-sphinx" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">wiki2rst</span></code> reads in mediawiki formatted webpages and converts them to <code class="docutils literal notranslate"><span class="pre">.rst</span></code> files, for use
in <code class="docutils literal notranslate"><span class="pre">Sphinx</span></code>. The code attempts to take all images and internal links and re-create the
documentation structure in the <code class="docutils literal notranslate"><span class="pre">Sphinx</span></code> format.</p>
<div class="section" id="use">
<h3><a class="toc-backref" href="#id15">Use</a><a class="headerlink" href="#use" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Having added <code class="docutils literal notranslate"><span class="pre">mantid</span></code> to your Python path <code class="docutils literal notranslate"><span class="pre">wiki2rst</span></code> is run by:</li>
</ul>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span class="n">python</span> <span class="n">wiki2rst</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">o</span> <span class="o">&lt;</span><span class="n">output_file</span><span class="o">.</span><span class="n">rst</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">url_extension</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">&lt;url_extension&gt;</span></code> is the part of the url after the main address (<code class="docutils literal notranslate"><span class="pre">https://www.mantidproject.org/</span></code>).</p>
</li>
<li><dl class="first docutils">
<dt>There are several additional options:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal notranslate"><span class="pre">--index_url</span></code> change the name of the main url address</li>
<li><code class="docutils literal notranslate"><span class="pre">--images-dir</span></code> set a relative location for the images directory</li>
<li><code class="docutils literal notranslate"><span class="pre">--ref-link</span></code> give a reference link</li>
<li><code class="docutils literal notranslate"><span class="pre">--ref-link-prefix</span></code> give a link prefix</li>
<li><code class="docutils literal notranslate"><span class="pre">--add_handle</span></code> add a handle for linking to the page</li>
<li><code class="docutils literal notranslate"><span class="pre">--page_handle</span></code> the page handle to use [default page name]</li>
<li><code class="docutils literal notranslate"><span class="pre">--add_heading</span></code> add a heading to the page (uses the page name)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="clang-tidy">
<h2><a class="toc-backref" href="#id16">Clang-tidy</a><a class="headerlink" href="#clang-tidy" title="Permalink to this headline">¶</a></h2>
<p>Clang-tidy is a set of tools which allows a developer to detect and fix code which does not follow current best practices,
such as unused parameters or not using range-based for loops. Primarily this is used for modernising C++ code.</p>
<p>The full list of clang-tidy checks can be seen <a class="reference external" href="https://clang.llvm.org/extra/clang-tidy/checks/list.html">here</a>.</p>
<div class="section" id="installing">
<h3><a class="toc-backref" href="#id17">Installing</a><a class="headerlink" href="#installing" title="Permalink to this headline">¶</a></h3>
<p>Mantid does not come packaged with clang-tidy; each developer must download it themselves. Windows users can utilise clang-tidy support for Visual Studio.
For other operating systems, Mantid provides clang-tidy functionality through cmake.</p>
<ul class="simple">
<li><strong>Ubuntu</strong>: Run <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">clang-tidy</span></code> in the command line.</li>
<li><strong>Windows</strong>: Download the <a class="reference external" href="https://marketplace.visualstudio.com/items?itemName=caphyon.ClangPowerTools">Visual Studio extension</a>. Windows can operate clang-tidy from Visual Studio alone and so do not need to touch cmake.</li>
</ul>
<p>For non-Ubuntu systems, download the latest clang-tidy <a class="reference external" href="http://releases.llvm.org/download.html">pre-compiled binary</a>. Windows users should add to path when prompted.</p>
</div>
<div class="section" id="visual-studio">
<h3><a class="toc-backref" href="#id18">Visual Studio</a><a class="headerlink" href="#visual-studio" title="Permalink to this headline">¶</a></h3>
<p>Once you have installed the clang-tidy extension, Visual Studio will have additional options under <code class="docutils literal notranslate"><span class="pre">Tools</span> <span class="pre">-&gt;</span> <span class="pre">Options</span> <span class="pre">-&gt;</span> <span class="pre">Clang</span> <span class="pre">Power</span> <span class="pre">Tools</span></code>.
Here you can select which checks to run via a checkbox or by supplying a custom check string. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="o">-*</span><span class="p">,</span><span class="n">modernize</span><span class="o">-*</span>
</pre></div>
</div>
<p>will disable basic default checks (<code class="docutils literal notranslate"><span class="pre">-*</span></code>) and run all conversions to modern C++ (<code class="docutils literal notranslate"><span class="pre">modernize-*</span></code>), such as converting to range-based for loops or using the auto keyword.
Other settings <em>should</em> not require alteration for clang-tidy to work.</p>
<p>To run clang-tidy, right click on a target and highlight <code class="docutils literal notranslate"><span class="pre">Clang</span> <span class="pre">Power</span> <span class="pre">Tools</span></code>. You will have a number of options. <code class="docutils literal notranslate"><span class="pre">Tidy</span></code> will highlight code which fails one of the checks, whereas
<code class="docutils literal notranslate"><span class="pre">Tidy</span> <span class="pre">fix</span></code> will automatically change your code.</p>
<p><em>Note: clang-tidy does not work on</em> <strong>ALL BUILD</strong> <em>so it is necessary to select a subtarget.</em></p>
</div>
<div class="section" id="cmake">
<h3><a class="toc-backref" href="#id19">Cmake</a><a class="headerlink" href="#cmake" title="Permalink to this headline">¶</a></h3>
<p>In the cmake gui, find the <code class="docutils literal notranslate"><span class="pre">CLANG_TIDY_EXE</span></code> parameter. If you are a non-Linux developer, you may have to manually point to your clang-tidy install.
Configure, and check the cmake log for the message <cite>clang-tidy found</cite>. If the <cite>clang-tidy not found</cite> warning was posted instead then it has not worked.</p>
<p>Once you have clang-tidy, there are several relevant parameters you will want to change:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">ENABLE_CLANG_TIDY</span></code> will turn on clang-tidy support.</li>
<li><code class="docutils literal notranslate"><span class="pre">CLANG_TIDY_CHECKS</span></code> is a semi-colon separated list of checks for clang-tidy to carry out. This defaults to all <code class="docutils literal notranslate"><span class="pre">modernize-</span></code> checks.</li>
<li><code class="docutils literal notranslate"><span class="pre">APPLY_CLANG_TIDY_FIX</span></code> will automatically change the code whenever a check has returned a result. The behaviour of <code class="docutils literal notranslate"><span class="pre">ENABLE_CLANG_TIDY</span></code> without this checked is to highlight issues only.</li>
</ul>
<p>Configure the build to check that your selected options are reflected in <code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_CLANG_TIDY</span></code>, and then generate.
When you next build, clang-tidy will perform the selected checks on the code included in the target.</p>
<p><em>Note: There is a known issue that clang-tidy is only being applied to certain directories within</em> <code class="docutils literal notranslate"><span class="pre">Framework</span></code> <em>and</em> <code class="docutils literal notranslate"><span class="pre">Mantidplot</span></code>.</p>
</div>
<div class="section" id="options">
<h3><a class="toc-backref" href="#id20">Options</a><a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h3>
<p>Some clang-tidy checks have optional arguments. For example, <code class="docutils literal notranslate"><span class="pre">modernize-loop-convert</span></code>, which changes loops to range-based,
assigns a riskiness to each loop and can accept a <code class="docutils literal notranslate"><span class="pre">MinConfidence</span></code> argument to determine which risk levels to address.</p>
<p>Adding the optional arguments is clunky and will rarely be required, so it has not been directly added to Mantid’s cmake setup.
To add optional arguments, add the following onto the end of <code class="docutils literal notranslate"><span class="pre">CLANG_TIDY_CHECKS</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="p">;</span><span class="o">-</span><span class="n">config</span><span class="o">=</span><span class="p">{</span><span class="n">CheckOptions</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">check</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">choose</span><span class="o">-</span><span class="n">option</span><span class="o">.</span><span class="n">option</span><span class="o">-</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">option</span><span class="o">-</span><span class="n">value</span><span class="p">}</span> <span class="p">]}</span>
</pre></div>
</div>
<p>For example, to convert all loops classified as <em>risky</em> or above, we would append:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="p">;</span><span class="o">-</span><span class="n">config</span><span class="o">=</span><span class="p">{</span><span class="n">CheckOptions</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">modernize</span><span class="o">-</span><span class="n">loop</span><span class="o">-</span><span class="n">convert</span><span class="o">.</span><span class="n">MinConfidence</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">risky</span><span class="p">}</span> <span class="p">]}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="cmake-format">
<h2><a class="toc-backref" href="#id21">CMake-format</a><a class="headerlink" href="#cmake-format" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/cheshirekow/cmake_format/">CMake-format</a> is a tool which is used to format individual <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> to make them easier to read.
The package can be installed using <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">cmake_format</span></code> or <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">cmake_format</span></code>.</p>
<p>To use cmake-format on a specific <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file in the command line run</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">cmake_format</span> <span class="o">-</span><span class="n">c</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">mantid</span><span class="o">/.</span><span class="n">cmake</span><span class="o">-</span><span class="nb">format</span><span class="o">.</span><span class="n">json</span> <span class="o">-</span><span class="n">i</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">CMakeLists</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>This will format the file using the config file <code class="docutils literal notranslate"><span class="pre">.cmake-format.json</span></code> which can be found in the root of the mantid directory.</p>
<p>There is an official Visual Studio extension, details of which can be found <a class="reference external" href="https://marketplace.visualstudio.com/items?itemName=cheshirekow.cmake-format">here</a>.</p>
<p>To format on all the CMakeLists run the following from within the mantid source folder:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>

<span class="nb">dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">subdirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="nb">dir</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;CMakeLists.txt&quot;</span><span class="p">):</span>
                        <span class="n">cmakefile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Formatting &quot;</span> <span class="o">+</span> <span class="n">cmakefile</span><span class="p">)</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;python -m cmake_format -c &#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span> <span class="s1">&#39;.cmake-format.json&#39;</span><span class="p">)</span> <span class="o">+</span><span class="s1">&#39; -i &#39;</span> <span class="o">+</span> <span class="n">cmakefile</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="DesignDocumentGuides.html" title="Previous Chapter: Design Document Guidelines"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Design Docume...</span>
    </a>
  </li>
  <li>
    <a href="AlgorithmProfiler.html" title="Next Chapter: Work flows algorithm profiling"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Work flows al... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>